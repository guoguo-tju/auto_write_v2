# ç¬¬å››ç«  æ™ºèƒ½ä½“ç»å…¸èŒƒå¼æ„å»º
æ¥æº: Hello-Agents.pdfé¡µç èŒƒå›´: ç¬¬75-103é¡µ (å…±29é¡µ)
============================================================


--- ç¬¬75é¡µ ---

ç¬¬å››ç«   æ™ºèƒ½ä½“ç»å…¸èŒƒå¼æ„å»º  
åœ¨ä¸Šä¸€ç« ä¸­ï¼Œæˆ‘ä»¬æ·±å…¥æ¢è®¨äº†ä½œä¸ºç°ä»£æ™ºèƒ½ä½“ â€œå¤§è„‘ â€çš„å¤§è¯­è¨€æ¨¡å‹ã€‚æˆ‘ä»¬äº†è§£äº†å…¶å†…éƒ¨çš„ Transformer æ¶æ„ã€ä¸ä¹‹äº¤äº’
çš„æ–¹æ³•ï¼Œä»¥åŠå®ƒçš„èƒ½åŠ›è¾¹ç•Œã€‚ç°åœ¨ï¼Œæ˜¯æ—¶å€™å°†è¿™äº›ç†è®ºçŸ¥è¯†è½¬åŒ–ä¸ºå®è·µï¼Œäº²æ‰‹æ„å»ºæ™ºèƒ½ä½“äº†ã€‚
ä¸€ä¸ªç°ä»£çš„æ™ºèƒ½ä½“ï¼Œå…¶æ ¸å¿ƒèƒ½åŠ›åœ¨äºèƒ½å°†å¤§è¯­è¨€æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ä¸å¤–éƒ¨ä¸–ç•Œè”é€šã€‚å®ƒèƒ½å¤Ÿè‡ªä¸»åœ°ç†è§£ç”¨æˆ·æ„å›¾ã€æ‹†è§£
å¤æ‚ä»»åŠ¡ï¼Œå¹¶é€šè¿‡è°ƒç”¨ä»£ç è§£é‡Šå™¨ã€æœç´¢å¼•æ“ã€ APIç­‰ä¸€ç³»åˆ— â€œå·¥å…· â€ï¼Œæ¥è·å–ä¿¡æ¯ã€æ‰§è¡Œæ“ä½œï¼Œæœ€ç»ˆè¾¾æˆç›®æ ‡ã€‚  ç„¶è€Œï¼Œ
æ™ºèƒ½ä½“å¹¶éä¸‡èƒ½ï¼Œå®ƒåŒæ ·é¢ä¸´ç€æ¥è‡ªå¤§æ¨¡å‹æœ¬èº«çš„ â€œå¹»è§‰ â€é—®é¢˜ã€åœ¨å¤æ‚ä»»åŠ¡ä¸­å¯èƒ½é™·å…¥æ¨ç†å¾ªç¯ã€ä»¥åŠå¯¹å·¥å…·çš„é”™è¯¯
ä½¿ç”¨ç­‰æŒ‘æˆ˜ï¼Œè¿™äº›ä¹Ÿæ„æˆäº†æ™ºèƒ½ä½“çš„èƒ½åŠ›è¾¹ç•Œã€‚
ä¸ºäº†æ›´å¥½åœ°ç»„ç»‡æ™ºèƒ½ä½“çš„ â€œæ€è€ƒ â€ä¸â€œè¡ŒåŠ¨ â€è¿‡ç¨‹ï¼Œä¸šç•Œæ¶Œç°å‡ºäº†å¤šç§ç»å…¸çš„æ¶æ„èŒƒå¼ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†èšç„¦äºå…¶ä¸­æœ€å…·
ä»£è¡¨æ€§çš„ä¸‰ç§ï¼Œå¹¶ä¸€æ­¥æ­¥ä»é›¶å®ç°å®ƒä»¬ï¼š
ReAct (Reasoning and Acting) ï¼š ä¸€ç§å°† â€œæ€è€ƒ â€å’Œâ€œè¡ŒåŠ¨ â€ç´§å¯†ç»“åˆçš„èŒƒå¼ï¼Œè®©æ™ºèƒ½ä½“è¾¹æƒ³è¾¹åšï¼ŒåŠ¨æ€è°ƒæ•´ã€‚
Plan-and-Solve ï¼š ä¸€ç§ â€œä¸‰æ€è€Œåè¡Œ â€çš„èŒƒå¼ï¼Œæ™ºèƒ½ä½“é¦–å…ˆç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„è¡ŒåŠ¨è®¡åˆ’ï¼Œç„¶åä¸¥æ ¼æ‰§è¡Œã€‚
Reflection ï¼š ä¸€ç§èµ‹äºˆæ™ºèƒ½ä½“ â€œåæ€ â€èƒ½åŠ›çš„èŒƒå¼ï¼Œé€šè¿‡è‡ªæˆ‘æ‰¹åˆ¤å’Œä¿®æ­£æ¥ä¼˜åŒ–ç»“æœã€‚
äº†è§£äº†è¿™äº›ä¹‹åï¼Œä½ å¯èƒ½ä¼šé—®ï¼Œå¸‚é¢ä¸Šå·²æœ‰ LangChain ã€LlamaIndex ç­‰ä¼—å¤šä¼˜ç§€æ¡†æ¶ï¼Œä¸ºä½•è¿˜è¦ â€œé‡å¤é€ è½®å­ â€ï¼Ÿç­”æ¡ˆ
åœ¨äºï¼Œå°½ç®¡æˆç†Ÿçš„æ¡†æ¶åœ¨å·¥ç¨‹æ•ˆç‡ä¸Šä¼˜åŠ¿æ˜¾è‘—ï¼Œä½†ç›´æ¥ä½¿ç”¨é«˜åº¦æŠ½è±¡çš„å·¥å…·ï¼Œå¹¶ä¸åˆ©äºæˆ‘ä»¬äº†è§£èƒŒåçš„è®¾è®¡æœºåˆ¶æ˜¯æ€
ä¹ˆè¿è¡Œçš„ï¼Œæˆ–è€…æ˜¯æœ‰ä½•å¥½å¤„ã€‚å…¶æ¬¡ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šæš´éœ²å‡ºé¡¹ç›®çš„å·¥ç¨‹æŒ‘æˆ˜ã€‚æ¡†æ¶ä¸ºæˆ‘ä»¬å¤„ç†äº†è®¸å¤šé—®é¢˜ï¼Œä¾‹å¦‚æ¨¡å‹è¾“å‡º
æ ¼å¼çš„è§£æã€å·¥å…·è°ƒç”¨å¤±è´¥çš„é‡è¯•ã€é˜²æ­¢æ™ºèƒ½ä½“é™·å…¥æ­»å¾ªç¯ç­‰ã€‚äº²æ‰‹å¤„ç†è¿™äº›é—®é¢˜ï¼Œæ˜¯åŸ¹å…»ç³»ç»Ÿè®¾è®¡èƒ½åŠ›çš„æœ€ç›´æ¥æ–¹
å¼ã€‚æœ€åï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€ç‚¹ï¼ŒæŒæ¡äº†è®¾è®¡åŸç†ï¼Œä½ æ‰èƒ½çœŸæ­£åœ°ä»ä¸€ä¸ªæ¡†æ¶çš„ â€œä½¿ç”¨è€… â€è½¬å˜ä¸ºä¸€ä¸ªæ™ºèƒ½ä½“åº”ç”¨çš„ â€œåˆ›é€ 
è€…â€ã€‚å½“æ ‡å‡†ç»„ä»¶æ— æ³•æ»¡è¶³ä½ çš„å¤æ‚éœ€æ±‚æ—¶ï¼Œä½ å°†æ‹¥æœ‰æ·±åº¦å®šåˆ¶ä¹ƒè‡³ä»é›¶æ„å»ºä¸€ä¸ªå…¨æ–°æ™ºèƒ½ä½“çš„èƒ½åŠ›ã€‚
4.1 ç¯å¢ƒå‡†å¤‡ä¸åŸºç¡€å·¥å…·å®šä¹‰  
åœ¨å¼€å§‹æ„å»ºä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ­å»ºå¥½å¼€å‘ç¯å¢ƒå¹¶å®šä¹‰ä¸€äº›åŸºç¡€ç»„ä»¶ã€‚è¿™èƒ½å¸®åŠ©æˆ‘ä»¬åœ¨åç»­å®ç°ä¸åŒèŒƒå¼æ—¶ï¼Œé¿å…é‡å¤
åŠ³åŠ¨ï¼Œæ›´ä¸“æ³¨äºæ ¸å¿ƒé€»è¾‘ã€‚
4.1.1 å®‰è£…ä¾èµ–åº“  
æœ¬ä¹¦çš„å®æˆ˜éƒ¨åˆ†å°†ä¸»è¦ä½¿ç”¨  Python è¯­è¨€ï¼Œå»ºè®®ä½¿ç”¨  Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚é¦–å…ˆï¼Œè¯·ç¡®ä¿ä½ å·²ç»å®‰è£…äº†  openai 
åº“ç”¨äºä¸å¤§è¯­è¨€æ¨¡å‹äº¤äº’ï¼Œä»¥åŠ  python-dotenv åº“ç”¨äºå®‰å…¨åœ°ç®¡ç†æˆ‘ä»¬çš„  API å¯†é’¥ã€‚
åœ¨ä½ çš„ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
4.1.2 é…ç½®  API å¯†é’¥  
ä¸ºäº†è®©æˆ‘ä»¬çš„ä»£ç æ›´é€šç”¨ï¼Œæˆ‘ä»¬å°†æ¨¡å‹æœåŠ¡çš„ç›¸å…³ä¿¡æ¯ï¼ˆæ¨¡å‹ IDã€APIå¯†é’¥ã€æœåŠ¡åœ°å€ï¼‰ç»Ÿä¸€é…ç½®åœ¨ç¯å¢ƒå˜é‡ä¸­ã€‚
1. åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º  .env çš„æ–‡ä»¶ã€‚
2. åœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦ï¼Œå°†å…¶æŒ‡å‘  OpenAI å®˜æ–¹æœåŠ¡ï¼Œæˆ–ä»»ä½•å…¼å®¹  OpenAI æ¥å£
çš„æœ¬åœ° /ç¬¬ä¸‰æ–¹æœåŠ¡ã€‚
3. å¦‚æœå®åœ¨ä¸çŸ¥é“å¦‚ä½•è·å–ï¼Œå¯ä»¥å‚è€ƒ Datawhale å¦ä¸€æœ¬æ•™ç¨‹çš„ 1.2 APIè®¾ç½®pip install openai python-dotenv 1

--- ç¬¬76é¡µ ---

æˆ‘ä»¬çš„ä»£ç å°†ä»æ­¤æ–‡ä»¶è‡ªåŠ¨åŠ è½½è¿™äº›é…ç½®ã€‚
4.1.3 å°è£…åŸºç¡€  LLM è°ƒç”¨å‡½æ•°  
ä¸ºäº†è®©ä»£ç ç»“æ„æ›´æ¸…æ™°ã€æ›´æ˜“äºå¤ç”¨ï¼Œæˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªä¸“å±çš„ LLMå®¢æˆ·ç«¯ç±»ã€‚è¿™ä¸ªç±»å°†å°è£…æ‰€æœ‰ä¸æ¨¡å‹æœåŠ¡äº¤äº’çš„ç»†
èŠ‚ï¼Œè®©æˆ‘ä»¬çš„ä¸»é€»è¾‘å¯ä»¥æ›´ä¸“æ³¨äºæ™ºèƒ½ä½“çš„æ„å»ºã€‚# .env file
LLM_API_KEY="YOUR-API-KEY"
LLM_MODEL_ID="YOUR-MODEL"
LLM_BASE_URL="YOUR-URL"1
2
3
4
import os
from openai import OpenAI
from dotenv import load_dotenv
from typing import List, Dict
# åŠ è½½ .env æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡
load_dotenv()
class HelloAgentsLLM:
 Â  Â """
 Â   ä¸ºæœ¬ä¹¦ "Hello Agents" å®šåˆ¶çš„LLMå®¢æˆ·ç«¯ã€‚
 Â   å®ƒç”¨äºè°ƒç”¨ä»»ä½•å…¼å®¹OpenAIæ¥å£çš„æœåŠ¡ï¼Œå¹¶é»˜è®¤ä½¿ç”¨æµå¼å“åº”ã€‚
 Â   """
 Â  Â def __init__(self, model: str = None, apiKey: str = None, baseUrl: str = None, 
timeout: int = None):
 Â  Â  Â  Â """
 Â  Â  Â   åˆå§‹åŒ–å®¢æˆ·ç«¯ã€‚ä¼˜å…ˆä½¿ç”¨ä¼ å…¥å‚æ•°ï¼Œå¦‚æœæœªæä¾›ï¼Œåˆ™ä»ç¯å¢ƒå˜é‡åŠ è½½ã€‚
 Â  Â  Â   """
 Â  Â  Â  Â self.model = model or os.getenv("LLM_MODEL_ID")
 Â  Â  Â  Â apiKey = apiKey or os.getenv("LLM_API_KEY")
 Â  Â  Â  Â baseUrl = baseUrl or os.getenv("LLM_BASE_URL")
 Â  Â  Â  Â timeout = timeout or int(os.getenv("LLM_TIMEOUT", 6 0))
 Â  Â  Â  Â 
 Â  Â  Â  Â if not all([self.model, apiKey, baseUrl]):
 Â  Â  Â  Â  Â  Â raise ValueError("æ¨¡å‹IDã€APIå¯†é’¥å’ŒæœåŠ¡åœ°å€å¿…é¡»è¢«æä¾›æˆ–åœ¨.envæ–‡ä»¶ä¸­å®šä¹‰ã€‚")
 Â  Â  Â  Â self.client = OpenAI(api_key=apiKey, base_url=baseUrl, timeout=timeout)
 Â  Â def think(self, messages: List[Dict[str, str]], temperature: float = 0) -> str:
 Â  Â  Â  Â """
 Â  Â  Â   è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹è¿›è¡Œæ€è€ƒï¼Œå¹¶è¿”å›å…¶å“åº”ã€‚
 Â  Â  Â   """
 Â  Â  Â  Â print(f"ğŸ§  æ­£åœ¨è°ƒç”¨ {self.model} æ¨¡å‹...")
 Â  Â  Â  Â try:
 Â  Â  Â  Â  Â  Â response = self.client.chat.completions.create(
 Â  Â  Â  Â  Â  Â  Â  Â model=self.model,
 Â  Â  Â  Â  Â  Â  Â  Â messages=messages,
 Â  Â  Â  Â  Â  Â  Â  Â temperature=temperature,
 Â  Â  Â  Â  Â  Â  Â  Â stream=True,
 Â  Â  Â  Â  Â   )1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
1 6
1 7
1 8
1 9
2 0
2 1
2 2
2 3
2 4
2 5
2 6
2 7
2 8
2 9
3 0
3 1
3 2
3 3
3 4
3 5
3 6
3 7
3 8
3 9

--- ç¬¬77é¡µ ---

Â 
4.2 ReAct  
åœ¨å‡†å¤‡å¥½ LLMå®¢æˆ·ç«¯åï¼Œæˆ‘ä»¬å°†æ„å»ºç¬¬ä¸€ä¸ªï¼Œä¹Ÿæ˜¯æœ€ç»å…¸çš„ä¸€ä¸ªæ™ºèƒ½ä½“èŒƒå¼ ReAct (Reason + Act) ã€‚ReActç”±Shunyu  
Yaoäº2022å¹´æå‡º[1]ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯æ¨¡ä»¿äººç±»è§£å†³é—®é¢˜çš„æ–¹å¼ï¼Œå°† æ¨ç†  (Reasoning)  ä¸è¡ŒåŠ¨  (Acting)  æ˜¾å¼åœ°ç»“åˆèµ·
æ¥ï¼Œå½¢æˆä¸€ä¸ª â€œæ€è€ƒ -è¡ŒåŠ¨ -è§‚å¯Ÿ â€çš„å¾ªç¯ã€‚ Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â # å¤„ç†æµå¼å“åº”
 Â  Â  Â  Â  Â  Â print("âœ… å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸ:")
 Â  Â  Â  Â  Â  Â collected_content = []
 Â  Â  Â  Â  Â  Â for chunk in response:
 Â  Â  Â  Â  Â  Â  Â  Â content = chunk.choices[ 0].delta.content or ""
 Â  Â  Â  Â  Â  Â  Â  Â print(content, end="", flush=True)
 Â  Â  Â  Â  Â  Â  Â  Â collected_content.append(content)
 Â  Â  Â  Â  Â  Â print() Â # åœ¨æµå¼è¾“å‡ºç»“æŸåæ¢è¡Œ
 Â  Â  Â  Â  Â  Â return "".join(collected_content)
 Â  Â  Â  Â except Exception as e:
 Â  Â  Â  Â  Â  Â print(f"âŒ è°ƒç”¨LLM APIæ—¶å‘ç”Ÿé”™è¯¯: {e}")
 Â  Â  Â  Â  Â  Â return None
# --- å®¢æˆ·ç«¯ä½¿ç”¨ç¤ºä¾‹ ---
if __name__ == '__main__':
 Â  Â try:
 Â  Â  Â  Â llmClient = HelloAgentsLLM()
 Â  Â  Â  Â 
 Â  Â  Â  Â exampleMessages = [
 Â  Â  Â  Â  Â   {"role": "system", "content": "You are a helpful assistant that writes 
Python code."},
 Â  Â  Â  Â  Â   {"role": "user", "content": "å†™ä¸€ä¸ªå¿«é€Ÿæ’åºç®—æ³•"}
 Â  Â  Â   ]
 Â  Â  Â  Â 
 Â  Â  Â  Â print("--- è°ƒç”¨LLM ---")
 Â  Â  Â  Â responseText = llmClient.think(exampleMessages)
 Â  Â  Â  Â if responseText:
 Â  Â  Â  Â  Â  Â print("\n\n--- å®Œæ•´æ¨¡å‹å“åº” ---")
 Â  Â  Â  Â  Â  Â print(responseText)
 Â  Â except ValueError as e:
 Â  Â  Â  Â print(e)
>>>
--- è°ƒç”¨LLM ---
ğŸ§  æ­£åœ¨è°ƒç”¨ xxxxxx æ¨¡å‹...
âœ… å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸ:
å¿«é€Ÿæ’åºæ˜¯ä¸€ç§éå¸¸é«˜æ•ˆçš„æ’åºç®—æ³•...4 0
4 1
4 2
4 3
4 4
4 5
4 6
4 7
4 8
4 9
5 0
5 1
5 2
5 3
5 4
5 5
5 6
5 7
5 8
5 9
6 0
6 1
6 2
6 3
6 4
6 5
6 6
6 7
6 8
6 9
7 0
7 1
7 2
7 3
7 4
7 5
7 6
7 7
7 8
7 9

--- ç¬¬78é¡µ ---

4.2.1 ReAct çš„å·¥ä½œæµç¨‹  
åœ¨ReActè¯ç”Ÿä¹‹å‰ï¼Œä¸»æµçš„æ–¹æ³•å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šä¸€ç±»æ˜¯ â€œçº¯æ€è€ƒ â€å‹ï¼Œå¦‚æ€ç»´é“¾  (Chain-of-Thought) ï¼Œå®ƒèƒ½å¼•å¯¼æ¨¡å‹è¿›
è¡Œå¤æ‚çš„é€»è¾‘æ¨ç†ï¼Œä½†æ— æ³•ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’ï¼Œå®¹æ˜“äº§ç”Ÿäº‹å®å¹»è§‰ï¼›å¦ä¸€ç±»æ˜¯ â€œçº¯è¡ŒåŠ¨ â€å‹ï¼Œæ¨¡å‹ç›´æ¥è¾“å‡ºè¦æ‰§è¡Œçš„åŠ¨
ä½œï¼Œä½†ç¼ºä¹è§„åˆ’å’Œçº é”™èƒ½åŠ›ã€‚
ReActçš„å·§å¦™ä¹‹å¤„åœ¨äºï¼Œå®ƒè®¤è¯†åˆ° æ€è€ƒä¸è¡ŒåŠ¨æ˜¯ç›¸è¾…ç›¸æˆçš„ ã€‚æ€è€ƒæŒ‡å¯¼è¡ŒåŠ¨ï¼Œè€Œè¡ŒåŠ¨çš„ç»“æœåˆåè¿‡æ¥ä¿®æ­£æ€è€ƒã€‚ä¸º
æ­¤ï¼Œ ReActèŒƒå¼é€šè¿‡ä¸€ç§ç‰¹æ®Šçš„æç¤ºå·¥ç¨‹æ¥å¼•å¯¼æ¨¡å‹ï¼Œä½¿å…¶æ¯ä¸€æ­¥çš„è¾“å‡ºéƒ½éµå¾ªä¸€ä¸ªå›ºå®šçš„è½¨è¿¹ï¼š
Thought ( æ€è€ƒ )ï¼š è¿™æ˜¯æ™ºèƒ½ä½“çš„ â€œå†…å¿ƒç‹¬ç™½ â€ã€‚å®ƒä¼šåˆ†æå½“å‰æƒ…å†µã€åˆ†è§£ä»»åŠ¡ã€åˆ¶å®šä¸‹ä¸€æ­¥è®¡åˆ’ï¼Œæˆ–è€…åæ€ä¸Šä¸€
æ­¥çš„ç»“æœã€‚
Action ( è¡ŒåŠ¨ )ï¼š è¿™æ˜¯æ™ºèƒ½ä½“å†³å®šé‡‡å–çš„å…·ä½“åŠ¨ä½œï¼Œé€šå¸¸æ˜¯è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨å·¥å…·ï¼Œä¾‹å¦‚  Search['åä¸ºæœ€æ–°æ¬¾æ‰‹
æœº']ã€‚
Observation ( è§‚å¯Ÿ )ï¼š è¿™æ˜¯æ‰§è¡Œ Actionåä»å¤–éƒ¨å·¥å…·è¿”å›çš„ç»“æœï¼Œä¾‹å¦‚æœç´¢ç»“æœçš„æ‘˜è¦æˆ– APIçš„è¿”å›å€¼ã€‚
æ™ºèƒ½ä½“å°†ä¸æ–­é‡å¤è¿™ä¸ª  Thought -> Action -> Observation  çš„å¾ªç¯ï¼Œå°†æ–°çš„è§‚å¯Ÿç»“æœè¿½åŠ åˆ°å†å²è®°å½•ä¸­ï¼Œå½¢æˆä¸€ä¸ª
ä¸æ–­å¢é•¿çš„ä¸Šä¸‹æ–‡ï¼Œç›´åˆ°å®ƒåœ¨ Thoughtä¸­è®¤ä¸ºå·²ç»æ‰¾åˆ°äº†æœ€ç»ˆç­”æ¡ˆï¼Œç„¶åè¾“å‡ºç»“æœã€‚è¿™ä¸ªè¿‡ç¨‹å½¢æˆäº†ä¸€ä¸ªå¼ºå¤§çš„ååŒ
æ•ˆåº”ï¼šæ¨ç†ä½¿å¾—è¡ŒåŠ¨æ›´å…·ç›®çš„æ€§ï¼Œè€Œè¡ŒåŠ¨åˆ™ä¸ºæ¨ç†æä¾›äº†äº‹å®ä¾æ®ã€‚
æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªè¿‡ç¨‹å½¢å¼åŒ–åœ°è¡¨è¾¾å‡ºæ¥ï¼Œå¦‚å›¾ 4.1æ‰€ç¤ºã€‚å…·ä½“æ¥è¯´ï¼Œåœ¨æ¯ä¸ªæ—¶é—´æ­¥  ï¼Œæ™ºèƒ½ä½“çš„ç­–ç•¥ï¼ˆå³å¤§è¯­è¨€æ¨¡å‹  
ï¼‰ä¼šæ ¹æ®åˆå§‹é—®é¢˜   å’Œä¹‹å‰æ‰€æœ‰æ­¥éª¤çš„ â€œè¡ŒåŠ¨ -è§‚å¯Ÿ â€å†å²è½¨è¿¹  ï¼Œæ¥ç”Ÿæˆå½“å‰çš„æ€è€ƒ   å’Œ
è¡ŒåŠ¨  ï¼š
éšåï¼Œç¯å¢ƒä¸­çš„å·¥å…·   ä¼šæ‰§è¡Œè¡ŒåŠ¨  ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„è§‚å¯Ÿç»“æœ  ï¼š
è¿™ä¸ªå¾ªç¯ä¸æ–­è¿›è¡Œï¼Œå°†æ–°çš„   å¯¹è¿½åŠ åˆ°å†å²ä¸­ï¼Œç›´åˆ°æ¨¡å‹åœ¨æ€è€ƒ   ä¸­åˆ¤æ–­ä»»åŠ¡å·²å®Œæˆã€‚
å›¾ 4.1 ReAct èŒƒå¼ä¸­çš„ â€œæ€è€ƒ -è¡ŒåŠ¨ -è§‚å¯Ÿ â€ååŒå¾ªç¯
è¿™ç§æœºåˆ¶ç‰¹åˆ«é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š
éœ€è¦å¤–éƒ¨çŸ¥è¯†çš„ä»»åŠ¡ ï¼šå¦‚æŸ¥è¯¢å®æ—¶ä¿¡æ¯ï¼ˆå¤©æ°”ã€æ–°é—»ã€è‚¡ä»·ï¼‰ã€æœç´¢ä¸“ä¸šé¢†åŸŸçš„çŸ¥è¯†ç­‰ã€‚
éœ€è¦ç²¾ç¡®è®¡ç®—çš„ä»»åŠ¡ ï¼šå°†æ•°å­¦é—®é¢˜äº¤ç»™è®¡ç®—å™¨å·¥å…·ï¼Œé¿å… LLMçš„è®¡ç®—é”™è¯¯ã€‚
éœ€è¦ä¸ APIäº¤äº’çš„ä»»åŠ¡ ï¼šå¦‚æ“ä½œæ•°æ®åº“ã€è°ƒç”¨æŸä¸ªæœåŠ¡çš„ APIæ¥å®Œæˆç‰¹å®šåŠŸèƒ½ã€‚
å› æ­¤æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªå…·å¤‡ ä½¿ç”¨å¤–éƒ¨å·¥å…· èƒ½åŠ›çš„ ReActæ™ºèƒ½ä½“ï¼Œæ¥å›ç­”ä¸€ä¸ªå¤§è¯­è¨€æ¨¡å‹ä»…å‡­è‡ªèº«çŸ¥è¯†åº“æ— æ³•ç›´æ¥å›ç­”çš„
é—®é¢˜ã€‚ä¾‹å¦‚ï¼š â€œåä¸ºæœ€æ–°çš„æ‰‹æœºæ˜¯å“ªä¸€æ¬¾ï¼Ÿå®ƒçš„ä¸»è¦å–ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ â€ è¿™ä¸ªé—®é¢˜éœ€è¦æ™ºèƒ½ä½“ç†è§£è‡ªå·±éœ€è¦ä¸Šç½‘æœç´¢ï¼Œè°ƒç”¨
å·¥å…·æœç´¢ç»“æœå¹¶æ€»ç»“ç­”æ¡ˆã€‚

--- ç¬¬79é¡µ ---

4.2.2 å·¥å…·çš„å®šä¹‰ä¸å®ç°  
å¦‚æœè¯´å¤§è¯­è¨€æ¨¡å‹æ˜¯æ™ºèƒ½ä½“çš„å¤§è„‘ï¼Œé‚£ä¹ˆ å·¥å…·  (Tools)  å°±æ˜¯å…¶ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’çš„ â€œæ‰‹å’Œè„š â€ã€‚ä¸ºäº†è®© ReActèŒƒå¼èƒ½å¤ŸçœŸæ­£
è§£å†³æˆ‘ä»¬è®¾å®šçš„é—®é¢˜ï¼Œæ™ºèƒ½ä½“éœ€è¦å…·å¤‡è°ƒç”¨å¤–éƒ¨å·¥å…·çš„èƒ½åŠ›ã€‚
é’ˆå¯¹æœ¬èŠ‚è®¾å®šçš„ç›®æ ‡ â€”â€”å›ç­”å…³äº â€œåä¸ºæœ€æ–°æ‰‹æœº â€çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ™ºèƒ½ä½“æä¾›ä¸€ä¸ªç½‘é¡µæœç´¢å·¥å…·ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬é€‰
ç”¨ SerpApi ï¼Œå®ƒé€šè¿‡ APIæä¾›ç»“æ„åŒ–çš„ Googleæœç´¢ç»“æœï¼Œèƒ½ç›´æ¥è¿”å› â€œç­”æ¡ˆæ‘˜è¦æ¡† â€æˆ–ç²¾ç¡®çš„çŸ¥è¯†å›¾è°±ä¿¡æ¯ï¼Œ
é¦–å…ˆï¼Œéœ€è¦å®‰è£…è¯¥åº“ï¼š
åŒæ—¶ï¼Œä½ éœ€è¦å‰å¾€  SerpApiå®˜ç½‘  æ³¨å†Œä¸€ä¸ªå…è´¹è´¦æˆ·ï¼Œè·å–ä½ çš„ APIå¯†é’¥ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°æˆ‘ä»¬é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„  .env æ–‡
ä»¶ä¸­ï¼š
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä»£ç æ¥å®šä¹‰å’Œç®¡ç†è¿™ä¸ªå·¥å…·ã€‚æˆ‘ä»¬å°†åˆ†æ­¥è¿›è¡Œï¼šé¦–å…ˆå®ç°å·¥å…·çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œç„¶åæ„å»ºä¸€ä¸ªé€šç”¨çš„å·¥
å…·ç®¡ç†å™¨ã€‚
ï¼ˆ1ï¼‰å®ç°æœç´¢å·¥å…·çš„æ ¸å¿ƒé€»è¾‘
ä¸€ä¸ªè‰¯å¥½å®šä¹‰çš„å·¥å…·åº”åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ ï¼š
1. åç§°  (Name) ï¼š ä¸€ä¸ªç®€æ´ã€å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œä¾›æ™ºèƒ½ä½“åœ¨  Action ä¸­è°ƒç”¨ï¼Œä¾‹å¦‚  Searchã€‚
2. æè¿°  (Description) ï¼š ä¸€æ®µæ¸…æ™°çš„è‡ªç„¶è¯­è¨€æè¿°ï¼Œè¯´æ˜è¿™ä¸ªå·¥å…·çš„ç”¨é€”ã€‚ è¿™æ˜¯æ•´ä¸ªæœºåˆ¶ä¸­æœ€å…³é”®çš„éƒ¨åˆ† ï¼Œå› ä¸º
å¤§è¯­è¨€æ¨¡å‹ä¼šä¾èµ–è¿™æ®µæè¿°æ¥åˆ¤æ–­ä½•æ—¶ä½¿ç”¨å“ªä¸ªå·¥å…·ã€‚
3. æ‰§è¡Œé€»è¾‘  (Execution Logic) ï¼š çœŸæ­£æ‰§è¡Œä»»åŠ¡çš„å‡½æ•°æˆ–æ–¹æ³•ã€‚
æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå·¥å…·æ˜¯  search å‡½æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ¥æ”¶ä¸€ä¸ªæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œç„¶åè¿”å›æœç´¢ç»“æœã€‚pip install google-search-results 1
# .env file
# ... (ä¿ç•™ä¹‹å‰çš„LLMé…ç½®)
SERPAPI_API_KEY="YOUR_SERPAPI_API_KEY"1
2
3
from serpapi import SerpApiClient
def search(query: str) -> str:
 Â  Â """
 Â   ä¸€ä¸ªåŸºäºSerpApiçš„å®æˆ˜ç½‘é¡µæœç´¢å¼•æ“å·¥å…·ã€‚
 Â   å®ƒä¼šæ™ºèƒ½åœ°è§£ææœç´¢ç»“æœï¼Œä¼˜å…ˆè¿”å›ç›´æ¥ç­”æ¡ˆæˆ–çŸ¥è¯†å›¾è°±ä¿¡æ¯ã€‚
 Â   """
 Â  Â print(f"ğŸ” æ­£åœ¨æ‰§è¡Œ [SerpApi] ç½‘é¡µæœç´¢: {query}")
 Â  Â try:
 Â  Â  Â  Â api_key = os.getenv("SERPAPI_API_KEY")
 Â  Â  Â  Â if not api_key:
 Â  Â  Â  Â  Â  Â return "é”™è¯¯:SERPAPI_API_KEY æœªåœ¨ .env æ–‡ä»¶ä¸­é…ç½®ã€‚"
 Â  Â  Â  Â params = {
 Â  Â  Â  Â  Â  Â "engine": "google",
 Â  Â  Â  Â  Â  Â "q": query,
 Â  Â  Â  Â  Â  Â "api_key": api_key,
 Â  Â  Â  Â  Â  Â "gl": "cn", Â # å›½å®¶ä»£ç 
 Â  Â  Â  Â  Â  Â "hl": "zh-cn", # è¯­è¨€ä»£ç 1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
1 6
1 7
1 8
1 9

--- ç¬¬80é¡µ ---

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œé¦–å…ˆä¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨  answer_boxï¼ˆGoogleçš„ç­”æ¡ˆæ‘˜è¦æ¡†ï¼‰æˆ–  knowledge_graphï¼ˆçŸ¥è¯†å›¾è°±ï¼‰ç­‰ä¿¡
æ¯ï¼Œå¦‚æœå­˜åœ¨ï¼Œå°±ç›´æ¥è¿”å›è¿™äº›æœ€ç²¾ç¡®çš„ç­”æ¡ˆã€‚å¦‚æœä¸å­˜åœ¨ï¼Œå®ƒæ‰ä¼šé€€è€Œæ±‚å…¶æ¬¡ï¼Œè¿”å›å‰ä¸‰ä¸ªå¸¸è§„æœç´¢ç»“æœçš„æ‘˜è¦ã€‚
è¿™ç§ â€œæ™ºèƒ½è§£æ â€èƒ½ä¸º LLMæä¾›è´¨é‡æ›´é«˜çš„ä¿¡æ¯è¾“å…¥ã€‚
ï¼ˆ2ï¼‰æ„å»ºé€šç”¨çš„å·¥å…·æ‰§è¡Œå™¨
å½“æ™ºèƒ½ä½“éœ€è¦ä½¿ç”¨å¤šç§å·¥å…·æ—¶ï¼ˆä¾‹å¦‚ï¼Œé™¤äº†æœç´¢ï¼Œè¿˜å¯èƒ½éœ€è¦è®¡ç®—ã€æŸ¥è¯¢æ•°æ®åº“ç­‰ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç»Ÿä¸€çš„ç®¡ç†å™¨æ¥
æ³¨å†Œå’Œè°ƒåº¦è¿™äº›å·¥å…·ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª  ToolExecutor ç±»ã€‚ Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â client = SerpApiClient(params)
 Â  Â  Â  Â results = client.get_dict()
 Â  Â  Â  Â 
 Â  Â  Â  Â # æ™ºèƒ½è§£æ:ä¼˜å…ˆå¯»æ‰¾æœ€ç›´æ¥çš„ç­”æ¡ˆ
 Â  Â  Â  Â if "answer_box_list" in results:
 Â  Â  Â  Â  Â  Â return "\n".join(results["answer_box_list"])
 Â  Â  Â  Â if "answer_box" in results and "answer" in results["answer_box"]:
 Â  Â  Â  Â  Â  Â return results["answer_box"]["answer"]
 Â  Â  Â  Â if "knowledge_graph" in results and "description" in 
results["knowledge_graph"]:
 Â  Â  Â  Â  Â  Â return results["knowledge_graph"]["description"]
 Â  Â  Â  Â if "organic_results" in results and results["organic_results"]:
 Â  Â  Â  Â  Â  Â # å¦‚æœæ²¡æœ‰ç›´æ¥ç­”æ¡ˆï¼Œåˆ™è¿”å›å‰ä¸‰ä¸ªæœ‰æœºç»“æœçš„æ‘˜è¦
 Â  Â  Â  Â  Â  Â snippets = [
 Â  Â  Â  Â  Â  Â  Â  Â f"[{i+ 1}] {res.get('title', '')}\n{res.get('snippet', '')}"
 Â  Â  Â  Â  Â  Â  Â  Â for i, res in enumerate(results["organic_results"][: 3])
 Â  Â  Â  Â  Â   ]
 Â  Â  Â  Â  Â  Â return "\n\n".join(snippets)
 Â  Â  Â  Â 
 Â  Â  Â  Â return f"å¯¹ä¸èµ·ï¼Œæ²¡æœ‰æ‰¾åˆ°å…³äº '{query}' çš„ä¿¡æ¯ã€‚"
 Â  Â except Exception as e:
 Â  Â  Â  Â return f"æœç´¢æ—¶å‘ç”Ÿé”™è¯¯: {e}"2 0
2 1
2 2
2 3
2 4
2 5
2 6
2 7
2 8
2 9
3 0
3 1
3 2
3 3
3 4
3 5
3 6
3 7
3 8
3 9
4 0
4 1
4 2
4 3
from typing import Dict, Any
class ToolExecutor:
 Â  Â """
 Â   ä¸€ä¸ªå·¥å…·æ‰§è¡Œå™¨ï¼Œè´Ÿè´£ç®¡ç†å’Œæ‰§è¡Œå·¥å…·ã€‚
 Â   """
 Â  Â def __init__(self):
 Â  Â  Â  Â self.tools: Dict[str, Dict[str, Any]] = {}
 Â  Â def registerTool(self, name: str, description: str, func: callable):
 Â  Â  Â  Â """
 Â  Â  Â   å‘å·¥å…·ç®±ä¸­æ³¨å†Œä¸€ä¸ªæ–°å·¥å…·ã€‚
 Â  Â  Â   """
 Â  Â  Â  Â if name in self.tools:
 Â  Â  Â  Â  Â  Â print(f"è­¦å‘Š:å·¥å…· '{name}' å·²å­˜åœ¨ï¼Œå°†è¢«è¦†ç›–ã€‚")
 Â  Â  Â  Â self.tools[name] = {"description": description, "func": func}
 Â  Â  Â  Â print(f"å·¥å…· '{name}' å·²æ³¨å†Œã€‚")1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
1 6
1 7
1 8

--- ç¬¬81é¡µ ---

(3)æµ‹è¯•
ç°åœ¨ï¼Œæˆ‘ä»¬å°†  search å·¥å…·æ³¨å†Œåˆ°  ToolExecutor ä¸­ï¼Œå¹¶æ¨¡æ‹Ÿä¸€æ¬¡è°ƒç”¨ï¼Œä»¥éªŒè¯æ•´ä¸ªæµç¨‹æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚ Â  Â def getTool(self, name: str) -> callable:
 Â  Â  Â  Â """
 Â  Â  Â   æ ¹æ®åç§°è·å–ä¸€ä¸ªå·¥å…·çš„æ‰§è¡Œå‡½æ•°ã€‚
 Â  Â  Â   """
 Â  Â  Â  Â return self.tools.get(name, {}).get("func")
 Â  Â def getAvailableTools(self) -> str:
 Â  Â  Â  Â """
 Â  Â  Â   è·å–æ‰€æœ‰å¯ç”¨å·¥å…·çš„æ ¼å¼åŒ–æè¿°å­—ç¬¦ä¸²ã€‚
 Â  Â  Â   """
 Â  Â  Â  Â return "\n".join([
 Â  Â  Â  Â  Â  Â f"- {name}: {info['description']}" 
 Â  Â  Â  Â  Â  Â for name, info in self.tools.items()
 Â  Â  Â   ])1 9
2 0
2 1
2 2
2 3
2 4
2 5
2 6
2 7
2 8
2 9
3 0
3 1
3 2
3 3
# --- å·¥å…·åˆå§‹åŒ–ä¸ä½¿ç”¨ç¤ºä¾‹ ---
if __name__ == '__main__':
 Â  Â # 1. åˆå§‹åŒ–å·¥å…·æ‰§è¡Œå™¨
 Â  Â toolExecutor = ToolExecutor()
 Â  Â # 2. æ³¨å†Œæˆ‘ä»¬çš„å®æˆ˜æœç´¢å·¥å…·
 Â  Â search_description = "ä¸€ä¸ªç½‘é¡µæœç´¢å¼•æ“ã€‚å½“ä½ éœ€è¦å›ç­”å…³äºæ—¶äº‹ã€äº‹å®ä»¥åŠåœ¨ä½ çš„çŸ¥è¯†åº“ä¸­æ‰¾ä¸åˆ°çš„ä¿¡æ¯
æ—¶ï¼Œåº”ä½¿ç”¨æ­¤å·¥å…·ã€‚"
 Â  Â toolExecutor.registerTool("Search", search_description, search)
 Â  Â 
 Â  Â # 3. æ‰“å°å¯ç”¨çš„å·¥å…·
 Â  Â print("\n--- å¯ç”¨çš„å·¥å…· ---")
 Â  Â print(toolExecutor.getAvailableTools())
 Â  Â # 4. æ™ºèƒ½ä½“çš„Actionè°ƒç”¨ï¼Œè¿™æ¬¡æˆ‘ä»¬é—®ä¸€ä¸ªå®æ—¶æ€§çš„é—®é¢˜
 Â  Â print("\n--- æ‰§è¡Œ Action: Search['è‹±ä¼Ÿè¾¾æœ€æ–°çš„GPUå‹å·æ˜¯ä»€ä¹ˆ'] ---")
 Â  Â tool_name = "Search"
 Â  Â tool_input = "è‹±ä¼Ÿè¾¾æœ€æ–°çš„GPUå‹å·æ˜¯ä»€ä¹ˆ"
 Â  Â tool_function = toolExecutor.getTool(tool_name)
 Â  Â if tool_function:
 Â  Â  Â  Â observation = tool_function(tool_input)
 Â  Â  Â  Â print("--- è§‚å¯Ÿ (Observation) ---")
 Â  Â  Â  Â print(observation)
 Â  Â else:
 Â  Â  Â  Â print(f"é”™è¯¯:æœªæ‰¾åˆ°åä¸º '{tool_name}' çš„å·¥å…·ã€‚")
 Â  Â  Â  Â 
>>>
å·¥å…· 'Search' å·²æ³¨å†Œã€‚
--- å¯ç”¨çš„å·¥å…· ---
- Search: ä¸€ä¸ªç½‘é¡µæœç´¢å¼•æ“ã€‚å½“ä½ éœ€è¦å›ç­”å…³äºæ—¶äº‹ã€äº‹å®ä»¥åŠåœ¨ä½ çš„çŸ¥è¯†åº“ä¸­æ‰¾ä¸åˆ°çš„ä¿¡æ¯æ—¶ï¼Œåº”ä½¿ç”¨æ­¤å·¥å…·ã€‚1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
1 6
1 7
1 8
1 9
2 0
2 1
2 2
2 3
2 4
2 5
2 6
2 7
2 8
2 9
3 0
3 1
3 2

--- ç¬¬82é¡µ ---

è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»ä¸ºæ™ºèƒ½ä½“é…å¤‡äº†è¿æ¥çœŸå®ä¸–ç•Œäº’è”ç½‘çš„ Searchå·¥å…·ï¼Œä¸ºåç»­çš„ ReActå¾ªç¯æä¾›äº†åšå®çš„åŸºç¡€ã€‚
Â 
4.2.3 ReAct æ™ºèƒ½ä½“çš„ç¼–ç å®ç°  
ç°åœ¨ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰ç‹¬ç«‹çš„ç»„ä»¶ï¼Œ LLMå®¢æˆ·ç«¯å’Œå·¥å…·æ‰§è¡Œå™¨ç»„è£…èµ·æ¥ï¼Œæ„å»ºä¸€ä¸ªå®Œæ•´çš„  ReAct æ™ºèƒ½ä½“ã€‚æˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ª  
ReActAgent ç±»æ¥å°è£…å…¶æ ¸å¿ƒé€»è¾‘ã€‚ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªç±»çš„å®ç°è¿‡ç¨‹æ‹†åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªå…³é”®éƒ¨åˆ†è¿›è¡Œè®²è§£ã€‚
ï¼ˆ1ï¼‰ç³»ç»Ÿæç¤ºè¯è®¾è®¡
æç¤ºè¯æ˜¯æ•´ä¸ª  ReAct æœºåˆ¶çš„åŸºçŸ³ï¼Œå®ƒä¸ºå¤§è¯­è¨€æ¨¡å‹æä¾›äº†è¡ŒåŠ¨çš„æ“ä½œæŒ‡ä»¤ã€‚æˆ‘ä»¬éœ€è¦ç²¾å¿ƒè®¾è®¡ä¸€ä¸ªæ¨¡æ¿ï¼Œå®ƒå°†åŠ¨æ€åœ°
æ’å…¥å¯ç”¨å·¥å…·ã€ç”¨æˆ·é—®é¢˜ä»¥åŠä¸­é—´æ­¥éª¤çš„äº¤äº’å†å²ã€‚
è¿™ä¸ªæ¨¡æ¿å®šä¹‰äº†æ™ºèƒ½ä½“ä¸ LLMä¹‹é—´äº¤äº’çš„è§„èŒƒï¼š
è§’è‰²å®šä¹‰ ï¼š â€œä½ æ˜¯ä¸€ä¸ªæœ‰èƒ½åŠ›è°ƒç”¨å¤–éƒ¨å·¥å…·çš„æ™ºèƒ½åŠ©æ‰‹ â€ï¼Œè®¾å®šäº† LLMçš„è§’è‰²ã€‚--- æ‰§è¡Œ Action: Search['è‹±ä¼Ÿè¾¾æœ€æ–°çš„GPUå‹å·æ˜¯ä»€ä¹ˆ'] ---
ğŸ” æ­£åœ¨æ‰§è¡Œ [SerpApi] ç½‘é¡µæœç´¢: è‹±ä¼Ÿè¾¾æœ€æ–°çš„GPUå‹å·æ˜¯ä»€ä¹ˆ
--- è§‚å¯Ÿ (Observation) ---
[ 1] GeForce RTX 5 0 ç³»åˆ—æ˜¾å¡
GeForce RTXâ„¢ 5 0 ç³»åˆ—GPU æ­è½½NVIDIA Blackwell æ¶æ„ï¼Œä¸ºæ¸¸æˆç©å®¶å’Œåˆ›ä½œè€…å¸¦æ¥å…¨æ–°ç©æ³•ã€‚RTX 5 0 ç³»åˆ—å…·
å¤‡å¼ºå¤§çš„AI ç®—åŠ›ï¼Œå¸¦æ¥å‡çº§ä½“éªŒå’Œæ›´é€¼çœŸçš„ç”»é¢ã€‚
[ 2] æ¯”è¾ƒGeForce ç³»åˆ—æœ€æ–°ä¸€ä»£æ˜¾å¡å’Œå‰ä»£æ˜¾å¡
æ¯”è¾ƒæœ€æ–°ä¸€ä»£RTX 3 0 ç³»åˆ—æ˜¾å¡å’Œå‰ä»£çš„RTX 2 0 ç³»åˆ—ã€GTX 1 0 å’Œ900 ç³»åˆ—æ˜¾å¡ã€‚æŸ¥çœ‹è§„æ ¼ã€åŠŸèƒ½ã€æŠ€æœ¯æ”¯æŒç­‰å†…
å®¹ã€‚
[ 3] GeForce æ˜¾å¡| NVIDIA
DRIVE AGX. å¼ºå¤§çš„è½¦è½½è®¡ç®—èƒ½åŠ›ï¼Œé€‚ç”¨äºAI é©±åŠ¨çš„æ™ºèƒ½æ±½è½¦ç³»ç»Ÿ Â· Clara AGX. é€‚ç”¨äºåˆ›æ–°å‹åŒ»ç–—è®¾å¤‡å’Œæˆåƒ
çš„AI è®¡ç®—. æ¸¸æˆå’Œåˆ›ä½œ. GeForce. æ¢ç´¢æ˜¾å¡ã€æ¸¸æˆè§£å†³æ–¹æ¡ˆã€AI ...3 3
3 4
3 5
3 6
3 7
3 8
3 9
4 0
4 1
4 2
4 3
# ReAct æç¤ºè¯æ¨¡æ¿
REACT_PROMPT_TEMPLATE = """
è¯·æ³¨æ„ï¼Œä½ æ˜¯ä¸€ä¸ªæœ‰èƒ½åŠ›è°ƒç”¨å¤–éƒ¨å·¥å…·çš„æ™ºèƒ½åŠ©æ‰‹ã€‚
å¯ç”¨å·¥å…·å¦‚ä¸‹:
{tools}
è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¿›è¡Œå›åº”:
Thought: ä½ çš„æ€è€ƒè¿‡ç¨‹ï¼Œç”¨äºåˆ†æé—®é¢˜ã€æ‹†è§£ä»»åŠ¡å’Œè§„åˆ’ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚
Action: ä½ å†³å®šé‡‡å–çš„è¡ŒåŠ¨ï¼Œå¿…é¡»æ˜¯ä»¥ä¸‹æ ¼å¼ä¹‹ä¸€:
- `{tool_name}[{tool_input}]`:è°ƒç”¨ä¸€ä¸ªå¯ç”¨å·¥å…·ã€‚
- `Finish[æœ€ç»ˆç­”æ¡ˆ]`:å½“ä½ è®¤ä¸ºå·²ç»è·å¾—æœ€ç»ˆç­”æ¡ˆæ—¶ã€‚
- å½“ä½ æ”¶é›†åˆ°è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œèƒ½å¤Ÿå›ç­”ç”¨æˆ·çš„æœ€ç»ˆé—®é¢˜æ—¶ï¼Œä½ å¿…é¡»åœ¨Action:å­—æ®µåä½¿ç”¨ finish(answer="...") æ¥
è¾“å‡ºæœ€ç»ˆç­”æ¡ˆã€‚
ç°åœ¨ï¼Œè¯·å¼€å§‹è§£å†³ä»¥ä¸‹é—®é¢˜:
Question: {question}
History: {history}
"""1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
1 6
1 7
1 8
1 9

--- ç¬¬83é¡µ ---

å·¥å…·æ¸…å•  ({tools})ï¼š å‘ŠçŸ¥ LLMå®ƒæœ‰å“ªäº›å¯ç”¨çš„ â€œæ‰‹è„š â€ã€‚
æ ¼å¼è§„çº¦  (Thought/Action)ï¼š è¿™æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œå®ƒå¼ºåˆ¶ LLMçš„è¾“å‡ºå…·æœ‰ç»“æ„æ€§ï¼Œä½¿æˆ‘ä»¬èƒ½é€šè¿‡ä»£ç ç²¾ç¡®
è§£æå…¶æ„å›¾ã€‚
åŠ¨æ€ä¸Šä¸‹æ–‡  ({question}/{history})ï¼š å°†ç”¨æˆ·çš„åŸå§‹é—®é¢˜å’Œä¸æ–­ç´¯ç§¯çš„äº¤äº’å†å²æ³¨å…¥ï¼Œè®© LLMåŸºäºå®Œæ•´çš„
ä¸Šä¸‹æ–‡è¿›è¡Œå†³ç­–ã€‚
ï¼ˆ2ï¼‰æ ¸å¿ƒå¾ªç¯çš„å®ç°
ReActAgent çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªå¾ªç¯ï¼Œå®ƒä¸æ–­åœ° â€œæ ¼å¼åŒ–æç¤ºè¯  -> è°ƒç”¨ LLM -> æ‰§è¡ŒåŠ¨ä½œ  -> æ•´åˆç»“æœ â€ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆæˆ–è¾¾
åˆ°æœ€å¤§æ­¥æ•°é™åˆ¶ã€‚
run æ–¹æ³•æ˜¯æ™ºèƒ½ä½“çš„å…¥å£ã€‚å®ƒçš„  while å¾ªç¯æ„æˆäº†  ReAct èŒƒå¼çš„ä¸»ä½“ï¼Œ max_steps å‚æ•°åˆ™æ˜¯ä¸€ä¸ªé‡è¦çš„å®‰å…¨é˜€ï¼Œ
é˜²æ­¢æ™ºèƒ½ä½“é™·å…¥æ— é™å¾ªç¯è€Œè€—å°½èµ„æºã€‚class ReActAgent:
 Â  Â def __init__(self, llm_client: HelloAgentsLLM, tool_executor: ToolExecutor, 
max_steps: int = 5):
 Â  Â  Â  Â self.llm_client = llm_client
 Â  Â  Â  Â self.tool_executor = tool_executor
 Â  Â  Â  Â self.max_steps = max_steps
 Â  Â  Â  Â self.history = []
 Â  Â def run(self, question: str):
 Â  Â  Â  Â """
 Â  Â  Â   è¿è¡ŒReActæ™ºèƒ½ä½“æ¥å›ç­”ä¸€ä¸ªé—®é¢˜ã€‚
 Â  Â  Â   """
 Â  Â  Â  Â self.history = [] # æ¯æ¬¡è¿è¡Œæ—¶é‡ç½®å†å²è®°å½•
 Â  Â  Â  Â current_step = 0
 Â  Â  Â  Â while current_step < self.max_steps:
 Â  Â  Â  Â  Â  Â current_step += 1
 Â  Â  Â  Â  Â  Â print(f"--- ç¬¬ {current_step} æ­¥ ---")
 Â  Â  Â  Â  Â  Â # 1. æ ¼å¼åŒ–æç¤ºè¯
 Â  Â  Â  Â  Â  Â tools_desc = self.tool_executor.getAvailableTools()
 Â  Â  Â  Â  Â  Â history_str = "\n".join(self.history)
 Â  Â  Â  Â  Â  Â prompt = REACT_PROMPT_TEMPLATE.format(
 Â  Â  Â  Â  Â  Â  Â  Â tools=tools_desc,
 Â  Â  Â  Â  Â  Â  Â  Â question=question,
 Â  Â  Â  Â  Â  Â  Â  Â history=history_str
 Â  Â  Â  Â  Â   )
 Â  Â  Â  Â  Â  Â # 2. è°ƒç”¨LLMè¿›è¡Œæ€è€ƒ
 Â  Â  Â  Â  Â  Â messages = [{"role": "user", "content": prompt}]
 Â  Â  Â  Â  Â  Â response_text = self.llm_client.think(messages=messages)
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â if not response_text:
 Â  Â  Â  Â  Â  Â  Â  Â print("é”™è¯¯:LLMæœªèƒ½è¿”å›æœ‰æ•ˆå“åº”ã€‚")
 Â  Â  Â  Â  Â  Â  Â  Â break
 Â  Â  Â  Â  Â  Â # ... (åç»­çš„è§£æã€æ‰§è¡Œã€æ•´åˆæ­¥éª¤)1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
1 6
1 7
1 8
1 9
2 0
2 1
2 2
2 3
2 4
2 5
2 6
2 7
2 8
2 9
3 0
3 1
3 2
3 3
3 4
3 5
3 6
3 7

--- ç¬¬84é¡µ ---

ï¼ˆ3ï¼‰è¾“å‡ºè§£æå™¨çš„å®ç°
LLM è¿”å›çš„æ˜¯çº¯æ–‡æœ¬ï¼Œæˆ‘ä»¬éœ€è¦ä»ä¸­ç²¾ç¡®åœ°æå–å‡º Thoughtå’ŒActionã€‚è¿™æ˜¯é€šè¿‡å‡ ä¸ªè¾…åŠ©è§£æå‡½æ•°å®Œæˆçš„ï¼Œå®ƒä»¬é€š
å¸¸ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥å®ç°ã€‚
_parse_outputï¼š è´Ÿè´£ä» LLMçš„å®Œæ•´å“åº”ä¸­åˆ†ç¦»å‡º Thoughtå’ŒActionä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ã€‚
_parse_actionï¼š è´Ÿè´£è¿›ä¸€æ­¥è§£æ Actionå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ä»  Search[åä¸ºæœ€æ–°æ‰‹æœº] ä¸­æå–å‡ºå·¥å…·å  Search 
å’Œå·¥å…·è¾“å…¥  åä¸ºæœ€æ–°æ‰‹æœºã€‚
(4) å·¥å…·è°ƒç”¨ä¸æ‰§è¡Œ# (è¿™äº›æ–¹æ³•æ˜¯ ReActAgent ç±»çš„ä¸€éƒ¨åˆ†)
 Â  Â def _parse_output(self, text: str):
 Â  Â  Â  Â """è§£æLLMçš„è¾“å‡ºï¼Œæå–Thoughtå’ŒActionã€‚"""
 Â  Â  Â  Â thought_match = re.search(r"Thought: (.*)", text)
 Â  Â  Â  Â action_match = re.search(r"Action: (.*)", text)
 Â  Â  Â  Â thought = thought_match.group( 1).strip() if thought_match else None
 Â  Â  Â  Â action = action_match.group( 1).strip() if action_match else None
 Â  Â  Â  Â return thought, action
 Â  Â def _parse_action(self, action_text: str):
 Â  Â  Â  Â """è§£æActionå­—ç¬¦ä¸²ï¼Œæå–å·¥å…·åç§°å’Œè¾“å…¥ã€‚"""
 Â  Â  Â  Â match = re.match(r"(\w+)\[(.*)\]", action_text)
 Â  Â  Â  Â if match:
 Â  Â  Â  Â  Â  Â return match.group( 1), match.group( 2)
 Â  Â  Â  Â return None, None1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
# (è¿™æ®µé€»è¾‘åœ¨ run æ–¹æ³•çš„ while å¾ªç¯å†…)
 Â  Â  Â  Â  Â  Â # 3. è§£æLLMçš„è¾“å‡º
 Â  Â  Â  Â  Â  Â thought, action = self._parse_output(response_text)
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â if thought:
 Â  Â  Â  Â  Â  Â  Â  Â print(f"æ€è€ƒ: {thought}")
 Â  Â  Â  Â  Â  Â if not action:
 Â  Â  Â  Â  Â  Â  Â  Â print("è­¦å‘Š:æœªèƒ½è§£æå‡ºæœ‰æ•ˆçš„Actionï¼Œæµç¨‹ç»ˆæ­¢ã€‚")
 Â  Â  Â  Â  Â  Â  Â  Â break
 Â  Â  Â  Â  Â  Â # 4. æ‰§è¡ŒAction
 Â  Â  Â  Â  Â  Â if action.startswith("Finish"):
 Â  Â  Â  Â  Â  Â  Â  Â # å¦‚æœæ˜¯FinishæŒ‡ä»¤ï¼Œæå–æœ€ç»ˆç­”æ¡ˆå¹¶ç»“æŸ
 Â  Â  Â  Â  Â  Â  Â  Â final_answer = re.match(r"Finish\[(.*)\]", action).group( 1)
 Â  Â  Â  Â  Â  Â  Â  Â print(f"ğŸ‰ æœ€ç»ˆç­”æ¡ˆ: {final_answer}")
 Â  Â  Â  Â  Â  Â  Â  Â return final_answer
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â tool_name, tool_input = self._parse_action(action)
 Â  Â  Â  Â  Â  Â if not tool_name or not tool_input:
 Â  Â  Â  Â  Â  Â  Â  Â # ... å¤„ç†æ— æ•ˆActionæ ¼å¼ ...
 Â  Â  Â  Â  Â  Â  Â  Â continue
 Â  Â  Â  Â  Â  Â print(f"ğŸ¬ è¡ŒåŠ¨: {tool_name}[{tool_input}]")
 Â  Â  Â  Â  Â  Â 1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
1 6
1 7
1 8
1 9
2 0
2 1
2 2
2 3
2 4
2 5

--- ç¬¬85é¡µ ---

è¿™æ®µä»£ç æ˜¯ Actionçš„æ‰§è¡Œä¸­å¿ƒã€‚å®ƒé¦–å…ˆæ£€æŸ¥æ˜¯å¦ä¸º FinishæŒ‡ä»¤ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™æµç¨‹ç»“æŸã€‚å¦åˆ™ï¼Œå®ƒä¼šé€šè¿‡
tool_executorè·å–å¯¹åº”çš„å·¥å…·å‡½æ•°å¹¶æ‰§è¡Œï¼Œå¾—åˆ° observationã€‚
(5ï¼‰è§‚æµ‹ç»“æœçš„æ•´åˆ
æœ€åä¸€æ­¥ï¼Œä¹Ÿæ˜¯å½¢æˆé—­ç¯çš„å…³é”®ï¼Œæ˜¯å°† Actionæœ¬èº«å’Œå·¥å…·æ‰§è¡Œåçš„ Observationæ·»åŠ å›å†å²è®°å½•ä¸­ï¼Œä¸ºä¸‹ä¸€è½®å¾ªç¯
æä¾›æ–°çš„ä¸Šä¸‹æ–‡ã€‚
é€šè¿‡å°†Observationè¿½åŠ åˆ°self.historyï¼Œæ™ºèƒ½ä½“åœ¨ä¸‹ä¸€è½®ç”Ÿæˆæç¤ºè¯æ—¶ï¼Œå°±èƒ½ â€œçœ‹åˆ° â€ä¸Šä¸€æ­¥è¡ŒåŠ¨çš„ç»“æœï¼Œå¹¶æ®æ­¤
è¿›è¡Œæ–°ä¸€è½®çš„æ€è€ƒå’Œè§„åˆ’ã€‚
ï¼ˆ6ï¼‰è¿è¡Œå®ä¾‹ä¸åˆ†æ
å°†ä»¥ä¸Šæ‰€æœ‰éƒ¨åˆ†ç»„åˆèµ·æ¥ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†å®Œæ•´çš„  ReActAgent ç±»ã€‚å®Œæ•´çš„ä»£ç è¿è¡Œå®ä¾‹å¯ä»¥åœ¨æœ¬ä¹¦é…å¥—çš„ä»£ç ä»“åº“  
code æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°ã€‚
ä¸‹é¢æ˜¯ä¸€æ¬¡çœŸå®çš„è¿è¡Œè®°å½•ï¼š Â  Â  Â  Â  Â  Â tool_function = self.tool_executor.getTool(tool_name)
 Â  Â  Â  Â  Â  Â if not tool_function:
 Â  Â  Â  Â  Â  Â  Â  Â observation = f"é”™è¯¯:æœªæ‰¾åˆ°åä¸º '{tool_name}' çš„å·¥å…·ã€‚"
 Â  Â  Â  Â  Â  Â else:
 Â  Â  Â  Â  Â  Â  Â  Â observation = tool_function(tool_input) # è°ƒç”¨çœŸå®å·¥å…·2 6
2 7
2 8
2 9
3 0
3 1
# (è¿™æ®µé€»è¾‘ç´§éšå·¥å…·è°ƒç”¨ä¹‹åï¼Œåœ¨ while å¾ªç¯çš„æœ«å°¾)
 Â  Â  Â  Â  Â  Â print(f"ğŸ‘€ è§‚å¯Ÿ: {observation}")
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â # å°†æœ¬è½®çš„Actionå’ŒObservationæ·»åŠ åˆ°å†å²è®°å½•ä¸­
 Â  Â  Â  Â  Â  Â self.history.append(f"Action: {action}")
 Â  Â  Â  Â  Â  Â self.history.append(f"Observation: {observation}")
 Â  Â  Â  Â # å¾ªç¯ç»“æŸ
 Â  Â  Â  Â print("å·²è¾¾åˆ°æœ€å¤§æ­¥æ•°ï¼Œæµç¨‹ç»ˆæ­¢ã€‚")
 Â  Â  Â  Â return None1
2
3
4
5
6
7
8
9
1 0
å·¥å…· 'Search' å·²æ³¨å†Œã€‚
--- ç¬¬ 1 æ­¥ ---
ğŸ§  æ­£åœ¨è°ƒç”¨ xxxxxx æ¨¡å‹...
âœ… å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸ:
Thought: è¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘éœ€è¦æŸ¥æ‰¾åä¸ºæœ€æ–°å‘å¸ƒçš„æ‰‹æœºå‹å·åŠå…¶ä¸»è¦ç‰¹ç‚¹ã€‚è¿™äº›ä¿¡æ¯å¯èƒ½åœ¨æˆ‘çš„ç°æœ‰çŸ¥è¯†åº“ä¹‹
å¤–ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨æœç´¢å¼•æ“æ¥è·å–æœ€æ–°æ•°æ®ã€‚
Action: Search[åä¸ºæœ€æ–°æ‰‹æœºå‹å·åŠä¸»è¦å–ç‚¹]
ğŸ¤” æ€è€ƒ: è¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘éœ€è¦æŸ¥æ‰¾åä¸ºæœ€æ–°å‘å¸ƒçš„æ‰‹æœºå‹å·åŠå…¶ä¸»è¦ç‰¹ç‚¹ã€‚è¿™äº›ä¿¡æ¯å¯èƒ½åœ¨æˆ‘çš„ç°æœ‰çŸ¥è¯†åº“ä¹‹
å¤–ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨æœç´¢å¼•æ“æ¥è·å–æœ€æ–°æ•°æ®ã€‚
ğŸ¬ è¡ŒåŠ¨: Search[åä¸ºæœ€æ–°æ‰‹æœºå‹å·åŠä¸»è¦å–ç‚¹]
ğŸ” æ­£åœ¨æ‰§è¡Œ [SerpApi] ç½‘é¡µæœç´¢: åä¸ºæœ€æ–°æ‰‹æœºå‹å·åŠä¸»è¦å–ç‚¹
ğŸ‘€ è§‚å¯Ÿ: [1] åä¸ºæ‰‹æœº- åä¸ºå®˜ç½‘
æ™ºèƒ½æ‰‹æœº ; Mate ç³»åˆ—. éå‡¡æ——èˆ° Â· HUAWEI Mate XTs. éå‡¡å¤§å¸ˆ ; Pura ç³»åˆ—. å…ˆé”‹å½±åƒ Â· HUAWEI Pura 
80 Pro+ ; Pocket ç³»åˆ—. ç¾å­¦æ–°ç¯‡. HUAWEI Pocket 2 ; nova ç³»åˆ—. ä¸“ä¸šäººåƒ.
[2] 2025å¹´åä¸ºæ‰‹æœºå“ªä¸€æ¬¾æ€§ä»·æ¯”é«˜ï¼Ÿåä¸ºæ‰‹æœºæ¨èä¸å¸‚åœºåˆ†æ ...1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4

--- ç¬¬86é¡µ ---

ä»ä¸Šé¢çš„è¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼Œæ™ºèƒ½ä½“æ¸…æ™°åœ°å±•ç¤ºäº†å®ƒçš„æ€è€ƒé“¾æ¡ï¼šå®ƒé¦–å…ˆæ„è¯†åˆ°è‡ªå·±çš„çŸ¥è¯†ä¸è¶³ï¼Œéœ€è¦ä½¿ç”¨æœç´¢å·¥å…·ï¼›ç„¶
åï¼Œå®ƒæ ¹æ®æœç´¢ç»“æœè¿›è¡Œæ¨ç†å’Œæ€»ç»“ï¼Œå¹¶åœ¨ä¸¤æ­¥ä¹‹å†…å¾—å‡ºäº†æœ€ç»ˆç­”æ¡ˆã€‚
å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”±äºæ¨¡å‹çš„çŸ¥è¯†å’Œäº’è”ç½‘çš„ä¿¡æ¯æ˜¯ä¸æ–­æ›´æ–°çš„ï¼Œä½ è¿è¡Œçš„ç»“æœå¯èƒ½ä¸æ­¤ä¸å®Œå…¨ç›¸åŒã€‚æˆªæ­¢æœ¬èŠ‚å†…å®¹ç¼–
å†™çš„ 2025å¹´9æœˆ8æ—¥ï¼Œæœç´¢ç»“æœä¸­æåˆ°çš„ HUAWEI Mate 70 ä¸HUAWEI Pura 80 Pro+ ç¡®å®æ˜¯åä¸ºå½“æ—¶æœ€æ–°çš„æ——èˆ°ç³»åˆ—æ‰‹
æœºã€‚è¿™å……åˆ†å±•ç¤ºäº† ReActèŒƒå¼åœ¨å¤„ç†æ—¶æ•ˆæ€§é—®é¢˜ä¸Šçš„å¼ºå¤§èƒ½åŠ›ã€‚
4.2.4 ReAct çš„ç‰¹ç‚¹ã€å±€é™æ€§ä¸è°ƒè¯•æŠ€å·§  
é€šè¿‡äº²æ‰‹å®ç°ä¸€ä¸ª  ReAct æ™ºèƒ½ä½“ï¼Œæˆ‘ä»¬ä¸ä»…æŒæ¡äº†å…¶å·¥ä½œæµç¨‹ï¼Œä¹Ÿåº”è¯¥å¯¹å…¶å†…åœ¨æœºåˆ¶æœ‰äº†æ›´æ·±åˆ»çš„è®¤è¯†ã€‚ä»»ä½•æŠ€æœ¯èŒƒ
å¼éƒ½æœ‰å…¶é—ªå…‰ç‚¹å’Œå¾…æ”¹è¿›ä¹‹å¤„ï¼Œæœ¬èŠ‚å°†å¯¹  ReAct è¿›è¡Œæ€»ç»“ã€‚
ï¼ˆ1ï¼‰ReAct çš„ä¸»è¦ç‰¹ç‚¹
1. é«˜å¯è§£é‡Šæ€§ ï¼šReAct æœ€å¤§çš„ä¼˜ç‚¹ä¹‹ä¸€å°±æ˜¯é€æ˜ã€‚é€šè¿‡  Thought é“¾ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°æ™ºèƒ½ä½“æ¯ä¸€æ­¥çš„ â€œå¿ƒè·¯
å†ç¨‹ â€â€”â€”å®ƒä¸ºä»€ä¹ˆä¼šé€‰æ‹©è¿™ä¸ªå·¥å…·ï¼Œä¸‹ä¸€æ­¥åˆæ‰“ç®—åšä»€ä¹ˆã€‚è¿™å¯¹äºç†è§£ã€ä¿¡ä»»å’Œè°ƒè¯•æ™ºèƒ½ä½“çš„è¡Œä¸ºè‡³å…³é‡è¦ã€‚
2. åŠ¨æ€è§„åˆ’ä¸çº é”™èƒ½åŠ› ï¼šä¸ä¸€æ¬¡æ€§ç”Ÿæˆå®Œæ•´è®¡åˆ’çš„èŒƒå¼ä¸åŒï¼Œ ReAct æ˜¯â€œèµ°ä¸€æ­¥ï¼Œçœ‹ä¸€æ­¥ â€ã€‚å®ƒæ ¹æ®æ¯ä¸€æ­¥ä»å¤–éƒ¨
ä¸–ç•Œè·å¾—çš„  Observation æ¥åŠ¨æ€è°ƒæ•´åç»­çš„  Thought å’Œ Actionã€‚å¦‚æœä¸Šä¸€æ­¥çš„æœç´¢ç»“æœä¸ç†æƒ³ï¼Œå®ƒå¯ä»¥
åœ¨ä¸‹ä¸€æ­¥ä¸­ä¿®æ­£æœç´¢è¯ï¼Œé‡æ–°å°è¯•ã€‚
3. å·¥å…·ååŒèƒ½åŠ› ï¼šReAct èŒƒå¼å¤©ç„¶åœ°å°†å¤§è¯­è¨€æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ä¸å¤–éƒ¨å·¥å…·çš„æ‰§è¡Œèƒ½åŠ›ç»“åˆèµ·æ¥ã€‚ LLM è´Ÿè´£è¿ç­¹å¸·
å¹„ï¼ˆè§„åˆ’å’Œæ¨ç†ï¼‰ï¼Œå·¥å…·è´Ÿè´£è§£å†³å…·ä½“é—®é¢˜ï¼ˆæœç´¢ã€è®¡ç®—ï¼‰ï¼ŒäºŒè€…ååŒå·¥ä½œï¼Œçªç ´äº†å•ä¸€  LLM åœ¨çŸ¥è¯†æ—¶æ•ˆæ€§ã€
è®¡ç®—å‡†ç¡®æ€§ç­‰æ–¹é¢çš„å›ºæœ‰å±€é™ã€‚
ï¼ˆ2ï¼‰ReAct çš„å›ºæœ‰å±€é™æ€§
1. å¯¹LLMè‡ªèº«èƒ½åŠ›çš„å¼ºä¾èµ– ï¼šReAct æµç¨‹çš„æˆåŠŸä¸å¦ï¼Œé«˜åº¦ä¾èµ–äºåº•å±‚  LLM çš„ç»¼åˆèƒ½åŠ›ã€‚å¦‚æœ  LLM çš„é€»è¾‘æ¨ç†ç°åœ¨åä¸ºæ‰‹æœºæœ€å¤§çš„å–ç‚¹åªå‰©ä¸‹é¸¿è’™HarmonyOSç³»ç»Ÿï¼Œä»¥åŠé¥±å—äº‰è®®çš„å“ç‰Œä¿¡ä»°ã€‚ è¿™é‡Œæ¨èç›®å‰å€¼å¾—å…¥æ‰‹çš„å‡ æ¬¾åä¸º
ç³»åˆ—æ‰‹æœºï¼Œæ ¹æ®ä¸åŒé¢„ç®—è‡ªè¡Œé€‰æ‹©:. åä¸ºç›®å‰æœ€å—æ¬¢è¿ï¼Œä¹Ÿæ˜¯æ­è½½ ...
[3] 2025å¹´åä¸ºæ–°æ¬¾æ‰‹æœºå“ªä¸ªæ€§ä»·æ¯”é«˜ï¼Ÿ10æ¬¾åä¸ºæ–°æ¬¾æ‰‹æœºæ¨è
é€‰åä¸ºä¸»è¦è¿˜æ˜¯è¦æ¨èé«˜ç«¯æ‰‹æœºï¼ŒMate 70å’ŒPura 70ç³»åˆ—æ˜¯æœ€æ–°å‘å¸ƒçš„æ——èˆ°æœºå‹ã€‚ HUAWEI Mate 70. ä¼˜ç‚¹æ˜¯ï¼Œæ‹
ç…§é…ç½®ä¾æ—§é¡¶çº§ï¼Œå…¨ç„¦æ®µè¦†ç›–ï¼Œé€‚åˆä¸“ä¸šæ‘„å½±ï¼Œåšå·¥å‡ºè‰²ï¼Œæˆ·å¤–æŠ—æ‘” ...
--- ç¬¬ 2 æ­¥ ---
ğŸ§  æ­£åœ¨è°ƒç”¨ xxxxxx æ¨¡å‹...
âœ… å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸ:
Thought: æ ¹æ®æœç´¢ç»“æœï¼Œåä¸ºæœ€æ–°å‘å¸ƒçš„æ——èˆ°æœºå‹åŒ…æ‹¬Mate 70å’ŒPura 80 Pro+ã€‚ä¸ºäº†ç¡®å®šæœ€æ–°å‹å·åŠå…¶ä¸»è¦å–
ç‚¹ï¼Œæˆ‘å°†é‡ç‚¹æ”¾åœ¨è¿™äº›ä¿¡æ¯ä¸Šã€‚ä»æä¾›çš„é“¾æ¥æ¥çœ‹ï¼ŒMate 70ç³»åˆ—å’ŒPura 80 Pro+éƒ½æ˜¯è¿‘æœŸå‘å¸ƒçš„äº§å“ï¼Œä½†å…·ä½“å“ªä¸€
ä¸ªæ˜¯â€œæœ€æ–°â€è¿˜éœ€è¦è¿›ä¸€æ­¥ç¡®è®¤ã€‚åŒæ—¶ï¼Œæˆ‘å¯ä»¥ä»è¿™äº›ä¿¡æ¯ä¸­æå–å‡ºå®ƒä»¬çš„ä¸»è¦
å–ç‚¹ã€‚
Action: Finish[æ ¹æ®æœ€æ–°ä¿¡æ¯ï¼Œåä¸ºçš„æœ€æ–°æ‰‹æœºå¯èƒ½æ˜¯HUAWEI Pura 80 Pro+æˆ–HUAWEI Mate 70ã€‚å…¶ä¸­ï¼Œ
HUAWEI Mate 70çš„ä¸»è¦å–ç‚¹åŒ…æ‹¬é¡¶çº§çš„æ‹ç…§é…ç½®ï¼Œå…¨ç„¦æ®µè¦†ç›–ï¼Œé€‚åˆä¸“ä¸šæ‘„å½±ï¼Œåšå·¥å‡ºè‰²ï¼Œå¹¶ä¸”å…·æœ‰è‰¯å¥½çš„æˆ·å¤–æŠ—æ‘”
æ€§èƒ½ã€‚è€ŒHUAWEI Pura 80 Pro+åˆ™å¼ºè°ƒäº†å…ˆé”‹å½±åƒæŠ€æœ¯ã€‚]
ğŸ¤” æ€è€ƒ: æ ¹æ®æœç´¢ç»“æœï¼Œåä¸ºæœ€æ–°å‘å¸ƒçš„æ——èˆ°æœºå‹åŒ…æ‹¬Mate 70å’ŒPura 80 Pro+ã€‚ä¸ºäº†ç¡®å®šæœ€æ–°å‹å·åŠå…¶ä¸»è¦å–
ç‚¹ï¼Œæˆ‘å°†é‡ç‚¹æ”¾åœ¨è¿™äº›ä¿¡æ¯ä¸Šã€‚ä»æä¾›çš„é“¾æ¥æ¥çœ‹ï¼ŒMate 70ç³»åˆ—å’ŒPura 80 Pro+éƒ½æ˜¯è¿‘æœŸå‘å¸ƒçš„äº§å“ï¼Œä½†å…·ä½“å“ªä¸€
ä¸ªæ˜¯â€œæœ€æ–°â€è¿˜éœ€è¦è¿›ä¸€æ­¥ç¡®è®¤ã€‚åŒæ—¶ï¼Œæˆ‘å¯ä»¥ä»è¿™äº›ä¿¡æ¯ä¸­æå–å‡ºå®ƒä»¬çš„ä¸»è¦ 
å–ç‚¹ã€‚
ğŸ‰ æœ€ç»ˆç­”æ¡ˆ: æ ¹æ®æœ€æ–°ä¿¡æ¯ï¼Œåä¸ºçš„æœ€æ–°æ‰‹æœºå¯èƒ½æ˜¯HUAWEI Pura 80 Pro+æˆ–HUAWEI Mate 70ã€‚å…¶ä¸­ï¼ŒHUAWEI 
Mate 70çš„ä¸»è¦å–ç‚¹åŒ…æ‹¬é¡¶çº§çš„æ‹ç…§é…ç½®ï¼Œå…¨ç„¦æ®µè¦†ç›–ï¼Œé€‚åˆä¸“ä¸šæ‘„å½±ï¼Œåšå·¥å‡ºè‰²ï¼Œå¹¶ä¸”å…·æœ‰è‰¯å¥½çš„æˆ·å¤–æŠ—æ‘”æ€§èƒ½ã€‚è€Œ
HUAWEI Pura 80 Pro+åˆ™å¼ºè°ƒäº†å…ˆé”‹å½±åƒæŠ€æœ¯ã€‚1 5
1 6
1 7
1 8
1 9
2 0
2 1
2 2
2 3
2 4
2 5
2 6
2 7
2 8

--- ç¬¬87é¡µ ---

èƒ½åŠ›ã€æŒ‡ä»¤éµå¾ªèƒ½åŠ›æˆ–æ ¼å¼åŒ–è¾“å‡ºèƒ½åŠ›ä¸è¶³ï¼Œå°±å¾ˆå®¹æ˜“åœ¨  Thought ç¯èŠ‚äº§ç”Ÿé”™è¯¯çš„è§„åˆ’ï¼Œæˆ–è€…åœ¨  Action ç¯
èŠ‚ç”Ÿæˆä¸ç¬¦åˆæ ¼å¼çš„æŒ‡ä»¤ï¼Œå¯¼è‡´æ•´ä¸ªæµç¨‹ä¸­æ–­ã€‚
2. æ‰§è¡Œæ•ˆç‡é—®é¢˜ ï¼šç”±äºå…¶å¾ªåºæ¸è¿›çš„ç‰¹æ€§ï¼Œå®Œæˆä¸€ä¸ªä»»åŠ¡é€šå¸¸éœ€è¦å¤šæ¬¡è°ƒç”¨  LLMã€‚æ¯ä¸€æ¬¡è°ƒç”¨éƒ½ä¼´éšç€ç½‘ç»œå»¶è¿Ÿ
å’Œè®¡ç®—æˆæœ¬ã€‚å¯¹äºéœ€è¦å¾ˆå¤šæ­¥éª¤çš„å¤æ‚ä»»åŠ¡ï¼Œè¿™ç§ä¸²è¡Œçš„ â€œæ€è€ƒ -è¡ŒåŠ¨ â€å¾ªç¯å¯èƒ½ä¼šå¯¼è‡´è¾ƒé«˜çš„æ€»è€—æ—¶å’Œè´¹ç”¨ã€‚
3. æç¤ºè¯çš„è„†å¼±æ€§ ï¼šæ•´ä¸ªæœºåˆ¶çš„ç¨³å®šè¿è¡Œå»ºç«‹åœ¨ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯æ¨¡æ¿ä¹‹ä¸Šã€‚æ¨¡æ¿ä¸­çš„ä»»ä½•å¾®å°å˜åŠ¨ï¼Œç”šè‡³
æ˜¯ç”¨è¯çš„å·®å¼‚ï¼Œéƒ½å¯èƒ½å½±å“  LLM çš„è¡Œä¸ºã€‚æ­¤å¤–ï¼Œå¹¶éæ‰€æœ‰æ¨¡å‹éƒ½èƒ½æŒç»­ç¨³å®šåœ°éµå¾ªé¢„è®¾çš„æ ¼å¼ï¼Œè¿™å¢åŠ äº†åœ¨å®
é™…åº”ç”¨ä¸­çš„ä¸ç¡®å®šæ€§ã€‚
4. å¯èƒ½é™·å…¥å±€éƒ¨æœ€ä¼˜ ï¼šæ­¥è¿›å¼çš„å†³ç­–æ¨¡å¼æ„å‘³ç€æ™ºèƒ½ä½“ç¼ºä¹ä¸€ä¸ªå…¨å±€çš„ã€é•¿è¿œçš„è§„åˆ’ã€‚å®ƒå¯èƒ½ä¼šå› ä¸ºçœ¼å‰çš„  
Observation è€Œé€‰æ‹©ä¸€ä¸ªçœ‹ä¼¼æ­£ç¡®ä½†é•¿è¿œæ¥çœ‹å¹¶éæœ€ä¼˜çš„è·¯å¾„ï¼Œç”šè‡³åœ¨æŸäº›æƒ…å†µä¸‹é™·å…¥ â€œåŸåœ°æ‰“è½¬ â€çš„å¾ªç¯ä¸­ã€‚
ï¼ˆ3ï¼‰è°ƒè¯•æŠ€å·§
å½“ä½ æ„å»ºçš„  ReAct æ™ºèƒ½ä½“è¡Œä¸ºä¸ç¬¦åˆé¢„æœŸæ—¶ï¼Œå¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å…¥æ‰‹è¿›è¡Œè°ƒè¯•ï¼š
æ£€æŸ¥å®Œæ•´çš„æç¤ºè¯ ï¼šåœ¨æ¯æ¬¡è°ƒç”¨  LLM ä¹‹å‰ï¼Œå°†æœ€ç»ˆæ ¼å¼åŒ–å¥½çš„ã€åŒ…å«æ‰€æœ‰å†å²è®°å½•çš„å®Œæ•´æç¤ºè¯æ‰“å°å‡ºæ¥ã€‚è¿™
æ˜¯è¿½æº¯  LLM å†³ç­–æºå¤´çš„æœ€ç›´æ¥æ–¹å¼ã€‚
åˆ†æåŸå§‹è¾“å‡º ï¼šå½“è¾“å‡ºè§£æå¤±è´¥æ—¶ï¼ˆä¾‹å¦‚ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰åŒ¹é…åˆ°  Actionï¼‰ï¼ŒåŠ¡å¿…å°†  LLM è¿”å›çš„åŸå§‹ã€æœªç»
å¤„ç†çš„æ–‡æœ¬æ‰“å°å‡ºæ¥ã€‚è¿™èƒ½å¸®åŠ©ä½ åˆ¤æ–­æ˜¯  LLM æ²¡æœ‰éµå¾ªæ ¼å¼ï¼Œè¿˜æ˜¯ä½ çš„è§£æé€»è¾‘æœ‰è¯¯ã€‚
éªŒè¯å·¥å…·çš„è¾“å…¥ä¸è¾“å‡º ï¼šæ£€æŸ¥æ™ºèƒ½ä½“ç”Ÿæˆçš„  tool_input æ˜¯å¦æ˜¯å·¥å…·å‡½æ•°æ‰€æœŸæœ›çš„æ ¼å¼ï¼ŒåŒæ—¶ä¹Ÿè¦ç¡®ä¿å·¥å…·è¿”
å›çš„  observation æ ¼å¼æ˜¯æ™ºèƒ½ä½“å¯ä»¥ç†è§£å’Œå¤„ç†çš„ã€‚
è°ƒæ•´æç¤ºè¯ä¸­çš„ç¤ºä¾‹  (Few-shot Prompting) ï¼šå¦‚æœæ¨¡å‹é¢‘ç¹å‡ºé”™ï¼Œå¯ä»¥åœ¨æç¤ºè¯ä¸­åŠ å…¥ä¸€ä¸¤ä¸ªå®Œæ•´çš„
â€œThought-Action-Observationâ€ æˆåŠŸæ¡ˆä¾‹ï¼Œé€šè¿‡ç¤ºä¾‹æ¥å¼•å¯¼æ¨¡å‹æ›´å¥½åœ°éµå¾ªä½ çš„æŒ‡ä»¤ã€‚
å°è¯•ä¸åŒçš„æ¨¡å‹æˆ–å‚æ•° ï¼šæ›´æ¢ä¸€ä¸ªèƒ½åŠ›æ›´å¼ºçš„æ¨¡å‹ï¼Œæˆ–è€…è°ƒæ•´  temperature å‚æ•°ï¼ˆé€šå¸¸è®¾ä¸º 0ä»¥ä¿è¯è¾“å‡ºçš„ç¡®
å®šæ€§ï¼‰ï¼Œæœ‰æ—¶èƒ½ç›´æ¥è§£å†³é—®é¢˜ã€‚
4.3 Plan-and-Solve  
åœ¨æˆ‘ä»¬æŒæ¡äº†  ReAct è¿™ç§ååº”å¼çš„ã€æ­¥è¿›å†³ç­–çš„æ™ºèƒ½ä½“èŒƒå¼åï¼Œæ¥ä¸‹æ¥å°†æ¢è®¨ä¸€ç§é£æ ¼è¿¥å¼‚ä½†åŒæ ·å¼ºå¤§çš„æ–¹æ³•ï¼Œ
Plan-and-Solve ã€‚é¡¾åæ€ä¹‰ï¼Œè¿™ç§èŒƒå¼å°†ä»»åŠ¡å¤„ç†æ˜ç¡®åœ°åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š å…ˆè§„åˆ’  (Plan)ï¼Œåæ‰§è¡Œ  (Solve)ã€‚
å¦‚æœè¯´  ReAct åƒä¸€ä¸ªç»éªŒä¸°å¯Œçš„ä¾¦æ¢ï¼Œæ ¹æ®ç°åœºçš„è››ä¸é©¬è¿¹ï¼ˆ Observation ï¼‰ä¸€æ­¥æ­¥æ¨ç†ï¼Œéšæ—¶è°ƒæ•´è‡ªå·±çš„è°ƒæŸ¥æ–¹
å‘ï¼›é‚£ä¹ˆ  Plan-and-Solve åˆ™æ›´åƒä¸€ä½å»ºç­‘å¸ˆï¼Œåœ¨åŠ¨å·¥ä¹‹å‰å¿…é¡»å…ˆç»˜åˆ¶å‡ºå®Œæ•´çš„è“å›¾ï¼ˆ Planï¼‰ï¼Œç„¶åä¸¥æ ¼æŒ‰ç…§è“å›¾æ¥æ–½
å·¥ï¼ˆ Solveï¼‰ã€‚äº‹å®ä¸Šæˆ‘ä»¬ç°åœ¨ç”¨çš„å¾ˆå¤šå¤§æ¨¡å‹å·¥å…·çš„ Agentæ¨¡å¼éƒ½èå…¥äº†è¿™ç§è®¾è®¡æ¨¡å¼ã€‚
4.3.1 Plan-and-Solve çš„å·¥ä½œåŸç†  
Plan-and-Solve Prompting ç”± Lei Wang åœ¨2023å¹´æå‡º[2]ã€‚å…¶æ ¸å¿ƒåŠ¨æœºæ˜¯ä¸ºäº†è§£å†³æ€ç»´é“¾åœ¨å¤„ç†å¤šæ­¥éª¤ã€å¤æ‚é—®é¢˜æ—¶
å®¹æ˜“ â€œåç¦»è½¨é“ â€çš„é—®é¢˜ã€‚
ä¸ ReAct å°†æ€è€ƒå’Œè¡ŒåŠ¨èåˆåœ¨æ¯ä¸€æ­¥ä¸åŒï¼Œ Plan-and-Solve å°†æ•´ä¸ªæµç¨‹è§£è€¦ä¸ºä¸¤ä¸ªæ ¸å¿ƒé˜¶æ®µï¼Œå¦‚å›¾ 4.2æ‰€ç¤ºï¼š
1. è§„åˆ’é˜¶æ®µ  (Planning Phase) ï¼š é¦–å…ˆï¼Œæ™ºèƒ½ä½“ä¼šæ¥æ”¶ç”¨æˆ·çš„å®Œæ•´é—®é¢˜ã€‚å®ƒçš„ç¬¬ä¸€ä¸ªä»»åŠ¡ä¸æ˜¯ç›´æ¥å»è§£å†³é—®é¢˜æˆ–
è°ƒç”¨å·¥å…·ï¼Œè€Œæ˜¯ å°†é—®é¢˜åˆ†è§£ï¼Œå¹¶åˆ¶å®šå‡ºä¸€ä¸ªæ¸…æ™°ã€åˆ†æ­¥éª¤çš„è¡ŒåŠ¨è®¡åˆ’ ã€‚è¿™ä¸ªè®¡åˆ’æœ¬èº«å°±æ˜¯ä¸€æ¬¡å¤§è¯­è¨€æ¨¡å‹çš„è°ƒ
ç”¨äº§ç‰©ã€‚
2. æ‰§è¡Œé˜¶æ®µ  (Solving Phase) ï¼š åœ¨è·å¾—å®Œæ•´çš„è®¡åˆ’åï¼Œæ™ºèƒ½ä½“è¿›å…¥æ‰§è¡Œé˜¶æ®µã€‚å®ƒä¼š ä¸¥æ ¼æŒ‰ç…§è®¡åˆ’ä¸­çš„æ­¥éª¤ï¼Œé€ä¸€
æ‰§è¡Œã€‚æ¯ä¸€æ­¥çš„æ‰§è¡Œéƒ½å¯èƒ½æ˜¯ä¸€æ¬¡ç‹¬ç«‹çš„  LLM è°ƒç”¨ï¼Œæˆ–è€…æ˜¯å¯¹ä¸Šä¸€æ­¥ç»“æœçš„åŠ å·¥å¤„ç†ï¼Œç›´åˆ°è®¡åˆ’ä¸­çš„æ‰€æœ‰æ­¥éª¤
éƒ½å®Œæˆï¼Œæœ€ç»ˆå¾—å‡ºç­”æ¡ˆã€‚

--- ç¬¬88é¡µ ---

è¿™ç§ â€œå…ˆè°‹ååŠ¨ â€çš„ç­–ç•¥ï¼Œä½¿å¾—æ™ºèƒ½ä½“åœ¨å¤„ç†éœ€è¦é•¿è¿œè§„åˆ’çš„å¤æ‚ä»»åŠ¡æ—¶ï¼Œèƒ½å¤Ÿä¿æŒæ›´é«˜çš„ç›®æ ‡ä¸€è‡´æ€§ï¼Œé¿å…åœ¨ä¸­é—´æ­¥
éª¤ä¸­è¿·å¤±æ–¹å‘ã€‚
æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªä¸¤é˜¶æ®µè¿‡ç¨‹è¿›è¡Œå½¢å¼åŒ–è¡¨è¾¾ã€‚é¦–å…ˆï¼Œè§„åˆ’æ¨¡å‹   æ ¹æ®åŸå§‹é—®é¢˜   ç”Ÿæˆä¸€ä¸ªåŒ…å«   ä¸ªæ­¥éª¤çš„è®¡åˆ’  
ï¼š
éšåï¼Œåœ¨æ‰§è¡Œé˜¶æ®µï¼Œæ‰§è¡Œæ¨¡å‹   ä¼šé€ä¸€å®Œæˆè®¡åˆ’ä¸­çš„æ­¥éª¤ã€‚å¯¹äºç¬¬   ä¸ªæ­¥éª¤ï¼Œå…¶è§£å†³æ–¹æ¡ˆ   çš„ç”Ÿæˆä¼šåŒæ—¶ä¾èµ–äº
åŸå§‹é—®é¢˜  ã€å®Œæ•´è®¡åˆ’   ä»¥åŠä¹‹å‰æ‰€æœ‰æ­¥éª¤çš„æ‰§è¡Œç»“æœ  ï¼š
æœ€ç»ˆçš„ç­”æ¡ˆå°±æ˜¯æœ€åä¸€ä¸ªæ­¥éª¤çš„æ‰§è¡Œç»“æœ  ã€‚
å›¾ 4.2 Plan-and-Solve èŒƒå¼çš„ä¸¤é˜¶æ®µå·¥ä½œæµ
Plan-and-Solve å°¤å…¶é€‚ç”¨äºé‚£äº›ç»“æ„æ€§å¼ºã€å¯ä»¥è¢«æ¸…æ™°åˆ†è§£çš„å¤æ‚ä»»åŠ¡ï¼Œä¾‹å¦‚ï¼š
å¤šæ­¥æ•°å­¦åº”ç”¨é¢˜ ï¼šéœ€è¦å…ˆåˆ—å‡ºè®¡ç®—æ­¥éª¤ï¼Œå†é€ä¸€æ±‚è§£ã€‚
éœ€è¦æ•´åˆå¤šä¸ªä¿¡æ¯æºçš„æŠ¥å‘Šæ’°å†™ ï¼šéœ€è¦å…ˆè§„åˆ’å¥½æŠ¥å‘Šç»“æ„ï¼ˆå¼•è¨€ã€æ•°æ®æ¥æº Aã€æ•°æ®æ¥æº Bã€æ€»ç»“ï¼‰ï¼Œå†é€ä¸€å¡«
å……å†…å®¹ã€‚
ä»£ç ç”Ÿæˆä»»åŠ¡ ï¼šéœ€è¦å…ˆæ„æ€å¥½å‡½æ•°ã€ç±»å’Œæ¨¡å—çš„ç»“æ„ï¼Œå†é€ä¸€å®ç°ã€‚
4.3.2 è§„åˆ’é˜¶æ®µ  
ä¸ºäº†å‡¸æ˜¾  Plan-and-Solve èŒƒå¼åœ¨ç»“æ„åŒ–æ¨ç†ä»»åŠ¡ä¸Šçš„ä¼˜åŠ¿ï¼Œæˆ‘ä»¬å°†ä¸ä½¿ç”¨å·¥å…·çš„æ–¹å¼ï¼Œè€Œæ˜¯é€šè¿‡æç¤ºè¯çš„è®¾è®¡ï¼Œå®Œæˆ
ä¸€ä¸ªæ¨ç†ä»»åŠ¡ã€‚
è¿™ç±»ä»»åŠ¡çš„ç‰¹ç‚¹æ˜¯ï¼Œç­”æ¡ˆæ— æ³•é€šè¿‡å•æ¬¡æŸ¥è¯¢æˆ–è®¡ç®—å¾—å‡ºï¼Œå¿…é¡»å…ˆå°†é—®é¢˜åˆ†è§£ä¸ºä¸€ç³»åˆ—é€»è¾‘è¿è´¯çš„å­æ­¥éª¤ï¼Œç„¶åæŒ‰é¡ºåº
æ±‚è§£ã€‚è¿™æ°å¥½èƒ½å‘æŒ¥  Plan-and-Solve â€œ å…ˆè§„åˆ’ï¼Œåæ‰§è¡Œ â€çš„æ ¸å¿ƒèƒ½åŠ›ã€‚
æˆ‘ä»¬çš„ç›®æ ‡é—®é¢˜æ˜¯ï¼š â€œä¸€ä¸ªæ°´æœåº—å‘¨ä¸€å–å‡ºäº† 15ä¸ªè‹¹æœã€‚å‘¨äºŒå–å‡ºçš„è‹¹æœæ•°é‡æ˜¯å‘¨ä¸€çš„ä¸¤å€ã€‚å‘¨ä¸‰å–å‡ºçš„æ•°é‡æ¯”å‘¨äºŒå°‘
äº†5ä¸ªã€‚è¯·é—®è¿™ä¸‰å¤©æ€»å…±å–å‡ºäº†å¤šå°‘ä¸ªè‹¹æœï¼Ÿ â€
è¿™ä¸ªé—®é¢˜å¯¹äºå¤§è¯­è¨€æ¨¡å‹æ¥è¯´å¹¶ä¸ç®—ç‰¹åˆ«å›°éš¾ï¼Œä½†å®ƒåŒ…å«äº†ä¸€ä¸ªæ¸…æ™°çš„é€»è¾‘é“¾æ¡å¯ä¾›å‚è€ƒã€‚åœ¨æŸäº›å®é™…çš„é€»è¾‘éš¾é¢˜
ä¸Šï¼Œå¦‚æœå¤§æ¨¡å‹ä¸èƒ½é«˜è´¨é‡çš„æ¨ç†å‡ºå‡†ç¡®çš„ç­”æ¡ˆï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªè®¾è®¡æ¨¡å¼æ¥è®¾è®¡è‡ªå·±çš„ Agentå®Œæˆä»»åŠ¡ã€‚æ™ºèƒ½ä½“éœ€
è¦ï¼š
1. è§„åˆ’é˜¶æ®µ ï¼šé¦–å…ˆï¼Œå°†é—®é¢˜åˆ†è§£ä¸ºä¸‰ä¸ªç‹¬ç«‹çš„è®¡ç®—æ­¥éª¤ï¼ˆè®¡ç®—å‘¨äºŒé”€é‡ã€è®¡ç®—å‘¨ä¸‰é”€é‡ã€è®¡ç®—æ€»é”€é‡ï¼‰ã€‚

--- ç¬¬89é¡µ ---

2. æ‰§è¡Œé˜¶æ®µ ï¼šç„¶åï¼Œä¸¥æ ¼æŒ‰ç…§è®¡åˆ’ï¼Œä¸€æ­¥æ­¥æ‰§è¡Œè®¡ç®—ï¼Œå¹¶å°†æ¯ä¸€æ­¥çš„ç»“æœä½œä¸ºä¸‹ä¸€æ­¥çš„è¾“å…¥ï¼Œæœ€ç»ˆå¾—å‡ºæ€»å’Œã€‚
è§„åˆ’é˜¶æ®µçš„ç›®æ ‡æ˜¯è®©å¤§è¯­è¨€æ¨¡å‹æ¥æ”¶åŸå§‹é—®é¢˜ï¼Œå¹¶è¾“å‡ºä¸€ä¸ªæ¸…æ™°ã€åˆ†æ­¥éª¤çš„è¡ŒåŠ¨è®¡åˆ’ã€‚è¿™ä¸ªè®¡åˆ’å¿…é¡»æ˜¯ç»“æ„åŒ–çš„ï¼Œä»¥
ä¾¿æˆ‘ä»¬çš„ä»£ç å¯ä»¥è½»æ¾è§£æå¹¶é€ä¸€æ‰§è¡Œã€‚å› æ­¤ï¼Œæˆ‘ä»¬è®¾è®¡çš„æç¤ºè¯éœ€è¦æ˜ç¡®åœ°å‘Šè¯‰æ¨¡å‹å®ƒçš„è§’è‰²å’Œä»»åŠ¡ï¼Œå¹¶ç»™å‡ºä¸€ä¸ª
è¾“å‡ºæ ¼å¼çš„èŒƒä¾‹ã€‚
è¿™ä¸ªæç¤ºè¯é€šè¿‡ä»¥ä¸‹å‡ ç‚¹ç¡®ä¿äº†è¾“å‡ºçš„è´¨é‡å’Œç¨³å®šæ€§ï¼š
è§’è‰²è®¾å®š ï¼š â€œé¡¶çº§çš„ AIè§„åˆ’ä¸“å®¶ â€ï¼Œæ¿€å‘æ¨¡å‹çš„ä¸“ä¸šèƒ½åŠ›ã€‚
ä»»åŠ¡æè¿° ï¼š æ¸…æ™°åœ°å®šä¹‰äº† â€œåˆ†è§£é—®é¢˜ â€çš„ç›®æ ‡ã€‚
æ ¼å¼çº¦æŸ ï¼š å¼ºåˆ¶è¦æ±‚è¾“å‡ºä¸ºä¸€ä¸ª  Python åˆ—è¡¨æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œè¿™æå¤§åœ°ç®€åŒ–äº†åç»­ä»£ç çš„è§£æå·¥ä½œï¼Œä½¿å…¶æ¯”è§£
æè‡ªç„¶è¯­è¨€æ›´ç¨³å®šã€æ›´å¯é ã€‚
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªæç¤ºè¯é€»è¾‘å°è£…æˆä¸€ä¸ª  Planner ç±»ï¼Œè¿™ä¸ªç±»ä¹Ÿæ˜¯æˆ‘ä»¬çš„è§„åˆ’å™¨ã€‚PLANNER_PROMPT_TEMPLATE = """
ä½ æ˜¯ä¸€ä¸ªé¡¶çº§çš„AIè§„åˆ’ä¸“å®¶ã€‚ä½ çš„ä»»åŠ¡æ˜¯å°†ç”¨æˆ·æå‡ºçš„å¤æ‚é—®é¢˜åˆ†è§£æˆä¸€ä¸ªç”±å¤šä¸ªç®€å•æ­¥éª¤ç»„æˆçš„è¡ŒåŠ¨è®¡åˆ’ã€‚
è¯·ç¡®ä¿è®¡åˆ’ä¸­çš„æ¯ä¸ªæ­¥éª¤éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ã€å¯æ‰§è¡Œçš„å­ä»»åŠ¡ï¼Œå¹¶ä¸”ä¸¥æ ¼æŒ‰ç…§é€»è¾‘é¡ºåºæ’åˆ—ã€‚
ä½ çš„è¾“å‡ºå¿…é¡»æ˜¯ä¸€ä¸ªPythonåˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªæè¿°å­ä»»åŠ¡çš„å­—ç¬¦ä¸²ã€‚
é—®é¢˜: {question}
è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¾“å‡ºä½ çš„è®¡åˆ’,```pythonä¸```ä½œä¸ºå‰åç¼€æ˜¯å¿…è¦çš„:
```python
["æ­¥éª¤1", "æ­¥éª¤2", "æ­¥éª¤3", ...]
```
"""1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
# å‡å®š llm_client.py ä¸­çš„ HelloAgentsLLM ç±»å·²ç»å®šä¹‰å¥½
# from llm_client import HelloAgentsLLM
class Planner:
 Â  Â def __init__(self, llm_client):
 Â  Â  Â  Â self.llm_client = llm_client
 Â  Â def plan(self, question: str) -> list[str]:
 Â  Â  Â  Â """
 Â  Â  Â   æ ¹æ®ç”¨æˆ·é—®é¢˜ç”Ÿæˆä¸€ä¸ªè¡ŒåŠ¨è®¡åˆ’ã€‚
 Â  Â  Â   """
 Â  Â  Â  Â prompt = PLANNER_PROMPT_TEMPLATE.format(question=question)
 Â  Â  Â  Â 
 Â  Â  Â  Â # ä¸ºäº†ç”Ÿæˆè®¡åˆ’ï¼Œæˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„æ¶ˆæ¯åˆ—è¡¨
 Â  Â  Â  Â messages = [{"role": "user", "content": prompt}]
 Â  Â  Â  Â 
 Â  Â  Â  Â print("--- æ­£åœ¨ç”Ÿæˆè®¡åˆ’ ---")
 Â  Â  Â  Â # ä½¿ç”¨æµå¼è¾“å‡ºæ¥è·å–å®Œæ•´çš„è®¡åˆ’
 Â  Â  Â  Â response_text = self.llm_client.think(messages=messages) or ""
 Â  Â  Â  Â 
 Â  Â  Â  Â print(f"âœ… è®¡åˆ’å·²ç”Ÿæˆ:\n{response_text}")
 Â  Â  Â  Â 
 Â  Â  Â  Â # è§£æLLMè¾“å‡ºçš„åˆ—è¡¨å­—ç¬¦ä¸²
 Â  Â  Â  Â try:1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
1 6
1 7
1 8
1 9
2 0
2 1
2 2
2 3
2 4

--- ç¬¬90é¡µ ---

4.3.3 æ‰§è¡Œå™¨ä¸çŠ¶æ€ç®¡ç†  
åœ¨è§„åˆ’å™¨  (Planner) ç”Ÿæˆäº†æ¸…æ™°çš„è¡ŒåŠ¨è“å›¾åï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªæ‰§è¡Œå™¨  (Executor) æ¥é€ä¸€å®Œæˆè®¡åˆ’ä¸­çš„ä»»åŠ¡ã€‚æ‰§è¡Œ
å™¨ä¸ä»…è´Ÿè´£è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹æ¥è§£å†³æ¯ä¸ªå­é—®é¢˜ï¼Œè¿˜æ‰¿æ‹…ç€ä¸€ä¸ªè‡³å…³é‡è¦çš„è§’è‰²ï¼š çŠ¶æ€ç®¡ç† ã€‚å®ƒå¿…é¡»è®°å½•æ¯ä¸€æ­¥çš„æ‰§è¡Œ
ç»“æœï¼Œå¹¶å°†å…¶ä½œä¸ºä¸Šä¸‹æ–‡æä¾›ç»™åç»­æ­¥éª¤ï¼Œç¡®ä¿ä¿¡æ¯åœ¨æ•´ä¸ªä»»åŠ¡é“¾æ¡ä¸­é¡ºç•…æµåŠ¨
æ‰§è¡Œå™¨çš„æç¤ºè¯ä¸è§„åˆ’å™¨ä¸åŒã€‚å®ƒçš„ç›®æ ‡ä¸æ˜¯åˆ†è§£é—®é¢˜ï¼Œè€Œæ˜¯ åœ¨å·²æœ‰ä¸Šä¸‹æ–‡çš„åŸºç¡€ä¸Šï¼Œä¸“æ³¨è§£å†³å½“å‰è¿™ä¸€ä¸ªæ­¥éª¤ ã€‚å› 
æ­¤ï¼Œæç¤ºè¯éœ€è¦åŒ…å«ä»¥ä¸‹å…³é”®ä¿¡æ¯ï¼š
åŸå§‹é—®é¢˜ ï¼š ç¡®ä¿æ¨¡å‹å§‹ç»ˆäº†è§£æœ€ç»ˆç›®æ ‡ã€‚
å®Œæ•´è®¡åˆ’ ï¼š è®©æ¨¡å‹äº†è§£å½“å‰æ­¥éª¤åœ¨æ•´ä¸ªä»»åŠ¡ä¸­çš„ä½ç½®ã€‚
å†å²æ­¥éª¤ä¸ç»“æœ ï¼š æä¾›è‡³ä»Šä¸ºæ­¢å·²ç»å®Œæˆçš„å·¥ä½œï¼Œä½œä¸ºå½“å‰æ­¥éª¤çš„ç›´æ¥è¾“å…¥ã€‚
å½“å‰æ­¥éª¤ ï¼š æ˜ç¡®æŒ‡ç¤ºæ¨¡å‹ç°åœ¨éœ€è¦è§£å†³å“ªä¸€ä¸ªå…·ä½“ä»»åŠ¡ã€‚
æˆ‘ä»¬å°†æ‰§è¡Œé€»è¾‘å°è£…åˆ°  Executor ç±»ä¸­ã€‚è¿™ä¸ªç±»å°†å¾ªç¯éå†è®¡åˆ’ï¼Œè°ƒç”¨  LLMï¼Œå¹¶ç»´æŠ¤ä¸€ä¸ªå†å²è®°å½•ï¼ˆçŠ¶æ€ï¼‰ã€‚ Â  Â  Â  Â  Â  Â # æ‰¾åˆ°```pythonå’Œ```ä¹‹é—´çš„å†…å®¹
 Â  Â  Â  Â  Â  Â plan_str = response_text.split("```python")[ 1].split("```")[ 0].strip()
 Â  Â  Â  Â  Â  Â # ä½¿ç”¨ast.literal_evalæ¥å®‰å…¨åœ°æ‰§è¡Œå­—ç¬¦ä¸²ï¼Œå°†å…¶è½¬æ¢ä¸ºPythonåˆ—è¡¨
 Â  Â  Â  Â  Â  Â plan = ast.literal_eval(plan_str)
 Â  Â  Â  Â  Â  Â return plan if isinstance(plan, list) else []
 Â  Â  Â  Â except (ValueError, SyntaxError, IndexError) as e:
 Â  Â  Â  Â  Â  Â print(f"âŒ è§£æè®¡åˆ’æ—¶å‡ºé”™: {e}")
 Â  Â  Â  Â  Â  Â print(f"åŸå§‹å“åº”: {response_text}")
 Â  Â  Â  Â  Â  Â return []
 Â  Â  Â  Â except Exception as e:
 Â  Â  Â  Â  Â  Â print(f"âŒ è§£æè®¡åˆ’æ—¶å‘ç”ŸæœªçŸ¥é”™è¯¯: {e}")
 Â  Â  Â  Â  Â  Â return []2 5
2 6
2 7
2 8
2 9
3 0
3 1
3 2
3 3
3 4
3 5
3 6
EXECUTOR_PROMPT_TEMPLATE = """
ä½ æ˜¯ä¸€ä½é¡¶çº§çš„AIæ‰§è¡Œä¸“å®¶ã€‚ä½ çš„ä»»åŠ¡æ˜¯ä¸¥æ ¼æŒ‰ç…§ç»™å®šçš„è®¡åˆ’ï¼Œä¸€æ­¥æ­¥åœ°è§£å†³é—®é¢˜ã€‚
ä½ å°†æ”¶åˆ°åŸå§‹é—®é¢˜ã€å®Œæ•´çš„è®¡åˆ’ã€ä»¥åŠåˆ°ç›®å‰ä¸ºæ­¢å·²ç»å®Œæˆçš„æ­¥éª¤å’Œç»“æœã€‚
è¯·ä½ ä¸“æ³¨äºè§£å†³â€œå½“å‰æ­¥éª¤â€ï¼Œå¹¶ä»…è¾“å‡ºè¯¥æ­¥éª¤çš„æœ€ç»ˆç­”æ¡ˆï¼Œä¸è¦è¾“å‡ºä»»ä½•é¢å¤–çš„è§£é‡Šæˆ–å¯¹è¯ã€‚
# åŸå§‹é—®é¢˜:
{question}
# å®Œæ•´è®¡åˆ’:
{plan}
# å†å²æ­¥éª¤ä¸ç»“æœ:
{history}
# å½“å‰æ­¥éª¤:
{current_step}
è¯·ä»…è¾“å‡ºé’ˆå¯¹â€œå½“å‰æ­¥éª¤â€çš„å›ç­”:
"""1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
1 6
1 7
1 8
1 9
class Executor:
 Â  Â def __init__(self, llm_client):1
2

--- ç¬¬91é¡µ ---

ç°åœ¨å·²ç»åˆ†åˆ«æ„å»ºäº†è´Ÿè´£ â€œè§„åˆ’ â€çš„ Planner å’Œè´Ÿè´£ â€œæ‰§è¡Œ â€çš„ Executorã€‚æœ€åä¸€æ­¥æ˜¯å°†è¿™ä¸¤ä¸ªç»„ä»¶æ•´åˆåˆ°ä¸€ä¸ªç»Ÿä¸€çš„
æ™ºèƒ½ä½“  PlanAndSolveAgent ä¸­ï¼Œå¹¶èµ‹äºˆå®ƒè§£å†³é—®é¢˜çš„å®Œæ•´èƒ½åŠ›ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªä¸»ç±»  PlanAndSolveAgentï¼Œå®ƒçš„
èŒè´£éå¸¸æ¸…æ™°ï¼šæ¥æ”¶ä¸€ä¸ª  LLM å®¢æˆ·ç«¯ï¼Œåˆå§‹åŒ–å†…éƒ¨çš„è§„åˆ’å™¨å’Œæ‰§è¡Œå™¨ï¼Œå¹¶æä¾›ä¸€ä¸ªç®€å•çš„  run æ–¹æ³•æ¥å¯åŠ¨æ•´ä¸ªæµ
ç¨‹ã€‚ Â  Â  Â  Â self.llm_client = llm_client
 Â  Â def execute(self, question: str, plan: list[str]) -> str:
 Â  Â  Â  Â """
 Â  Â  Â   æ ¹æ®è®¡åˆ’ï¼Œé€æ­¥æ‰§è¡Œå¹¶è§£å†³é—®é¢˜ã€‚
 Â  Â  Â   """
 Â  Â  Â  Â history = "" # ç”¨äºå­˜å‚¨å†å²æ­¥éª¤å’Œç»“æœçš„å­—ç¬¦ä¸²
 Â  Â  Â  Â 
 Â  Â  Â  Â print("\n--- æ­£åœ¨æ‰§è¡Œè®¡åˆ’ ---")
 Â  Â  Â  Â 
 Â  Â  Â  Â for i, step in enumerate(plan):
 Â  Â  Â  Â  Â  Â print(f"\n-> æ­£åœ¨æ‰§è¡Œæ­¥éª¤ {i+ 1}/{len(plan)}: {step}")
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â prompt = EXECUTOR_PROMPT_TEMPLATE.format(
 Â  Â  Â  Â  Â  Â  Â  Â question=question,
 Â  Â  Â  Â  Â  Â  Â  Â plan=plan,
 Â  Â  Â  Â  Â  Â  Â  Â history=history if history else "æ— ", # å¦‚æœæ˜¯ç¬¬ä¸€æ­¥ï¼Œåˆ™å†å²ä¸ºç©º
 Â  Â  Â  Â  Â  Â  Â  Â current_step=step
 Â  Â  Â  Â  Â   )
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â messages = [{"role": "user", "content": prompt}]
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â response_text = self.llm_client.think(messages=messages) or ""
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â # æ›´æ–°å†å²è®°å½•ï¼Œä¸ºä¸‹ä¸€æ­¥åšå‡†å¤‡
 Â  Â  Â  Â  Â  Â history += f"æ­¥éª¤ {i+ 1}: {step}\nç»“æœ: {response_text}\n\n"
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â print(f"âœ… æ­¥éª¤ {i+ 1} å·²å®Œæˆï¼Œç»“æœ: {response_text}")
 Â  Â  Â  Â # å¾ªç¯ç»“æŸåï¼Œæœ€åä¸€æ­¥çš„å“åº”å°±æ˜¯æœ€ç»ˆç­”æ¡ˆ
 Â  Â  Â  Â final_answer = response_text
 Â  Â  Â  Â return final_answer3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
1 6
1 7
1 8
1 9
2 0
2 1
2 2
2 3
2 4
2 5
2 6
2 7
2 8
2 9
3 0
3 1
3 2
3 3
3 4
class PlanAndSolveAgent:
 Â  Â def __init__(self, llm_client):
 Â  Â  Â  Â """
 Â  Â  Â   åˆå§‹åŒ–æ™ºèƒ½ä½“ï¼ŒåŒæ—¶åˆ›å»ºè§„åˆ’å™¨å’Œæ‰§è¡Œå™¨å®ä¾‹ã€‚
 Â  Â  Â   """
 Â  Â  Â  Â self.llm_client = llm_client
 Â  Â  Â  Â self.planner = Planner(self.llm_client)
 Â  Â  Â  Â self.executor = Executor(self.llm_client)
 Â  Â def run(self, question: str):
 Â  Â  Â  Â """
 Â  Â  Â   è¿è¡Œæ™ºèƒ½ä½“çš„å®Œæ•´æµç¨‹:å…ˆè§„åˆ’ï¼Œåæ‰§è¡Œã€‚
 Â  Â  Â   """
 Â  Â  Â  Â print(f"\n--- å¼€å§‹å¤„ç†é—®é¢˜ ---\né—®é¢˜: {question}")1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4

--- ç¬¬92é¡µ ---

è¿™ä¸ª  PlanAndSolveAgent ç±»çš„è®¾è®¡ä½“ç°äº† â€œç»„åˆä¼˜äºç»§æ‰¿ â€çš„åŸåˆ™ã€‚å®ƒæœ¬èº«ä¸åŒ…å«å¤æ‚çš„é€»è¾‘ï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªåè°ƒè€…  
(Orchestrator) ï¼Œæ¸…æ™°åœ°è°ƒç”¨å…¶å†…éƒ¨ç»„ä»¶æ¥å®Œæˆä»»åŠ¡ã€‚
4.3.4 è¿è¡Œå®ä¾‹ä¸åˆ†æ  
å®Œæ•´çš„ä»£ç åŒæ ·å‚è€ƒæœ¬ä¹¦é…å¥—çš„ä»£ç ä»“åº“  code æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œåªæ¼”ç¤ºæœ€ç»ˆç»“æœã€‚ Â  Â  Â  Â 
 Â  Â  Â  Â # 1. è°ƒç”¨è§„åˆ’å™¨ç”Ÿæˆè®¡åˆ’
 Â  Â  Â  Â plan = self.planner.plan(question)
 Â  Â  Â  Â 
 Â  Â  Â  Â # æ£€æŸ¥è®¡åˆ’æ˜¯å¦æˆåŠŸç”Ÿæˆ
 Â  Â  Â  Â if not plan:
 Â  Â  Â  Â  Â  Â print("\n--- ä»»åŠ¡ç»ˆæ­¢ --- \næ— æ³•ç”Ÿæˆæœ‰æ•ˆçš„è¡ŒåŠ¨è®¡åˆ’ã€‚")
 Â  Â  Â  Â  Â  Â return
 Â  Â  Â  Â # 2. è°ƒç”¨æ‰§è¡Œå™¨æ‰§è¡Œè®¡åˆ’
 Â  Â  Â  Â final_answer = self.executor.execute(question, plan)
 Â  Â  Â  Â 
 Â  Â  Â  Â print(f"\n--- ä»»åŠ¡å®Œæˆ ---\næœ€ç»ˆç­”æ¡ˆ: {final_answer}")1 5
1 6
1 7
1 8
1 9
2 0
2 1
2 2
2 3
2 4
2 5
2 6
2 7
- - - å¼€å§‹å¤„ç†é—®é¢˜ - - -
é—®é¢˜: ä¸€ä¸ªæ°´æœåº—å‘¨ä¸€å–å‡ºäº†15ä¸ªè‹¹æœã€‚å‘¨äºŒå–å‡ºçš„è‹¹æœæ•°é‡æ˜¯å‘¨ä¸€çš„ä¸¤å€ã€‚å‘¨ä¸‰å–å‡ºçš„æ•°é‡æ¯”å‘¨äºŒå°‘äº†5ä¸ªã€‚è¯·é—®è¿™
ä¸‰å¤©æ€»å…±å–å‡ºäº†å¤šå°‘ä¸ªè‹¹æœï¼Ÿ
- - - æ­£åœ¨ç”Ÿæˆè®¡åˆ’ - - -
ğŸ§  æ­£åœ¨è°ƒç”¨ xxxx æ¨¡å‹...
âœ… å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸ:
```python
["è®¡ç®—å‘¨ä¸€å–å‡ºçš„è‹¹æœæ•°é‡ï¼š 15ä¸ª", "è®¡ç®—å‘¨äºŒå–å‡ºçš„è‹¹æœæ•°é‡ï¼š å‘¨ä¸€æ•°é‡ Ã— 2 = 15 Ã— 2 = 30ä¸ª", "è®¡ç®—å‘¨
ä¸‰å–å‡ºçš„è‹¹æœæ•°é‡ï¼š å‘¨äºŒæ•°é‡ - 5 = 30 - 5 = 25ä¸ª", "è®¡ç®—ä¸‰å¤©æ€»é”€é‡ï¼š å‘¨ä¸€ + å‘¨äºŒ + å‘¨ä¸‰ = 15 + 30 
+ 25 = 70ä¸ª"]
```
âœ… è®¡åˆ’å·²ç”Ÿæˆ:
```python
["è®¡ç®—å‘¨ä¸€å–å‡ºçš„è‹¹æœæ•°é‡ï¼š 15ä¸ª", "è®¡ç®—å‘¨äºŒå–å‡ºçš„è‹¹æœæ•°é‡ï¼š å‘¨ä¸€æ•°é‡ Ã— 2 = 15 Ã— 2 = 30ä¸ª", "è®¡ç®—å‘¨
ä¸‰å–å‡ºçš„è‹¹æœæ•°é‡ï¼š å‘¨äºŒæ•°é‡ - 5 = 30 - 5 = 25ä¸ª", "è®¡ç®—ä¸‰å¤©æ€»é”€é‡ï¼š å‘¨ä¸€ + å‘¨äºŒ + å‘¨ä¸‰ = 15 + 30 
+ 25 = 70ä¸ª"]
```
- - - æ­£åœ¨æ‰§è¡Œè®¡åˆ’ - - -
-> æ­£åœ¨æ‰§è¡Œæ­¥éª¤ 1/4: è®¡ç®—å‘¨ä¸€å–å‡ºçš„è‹¹æœæ•°é‡: 1 5ä¸ª
ğŸ§  æ­£åœ¨è°ƒç”¨ xxxx æ¨¡å‹...
âœ… å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸ:
1 5
âœ… æ­¥éª¤ 1 å·²å®Œæˆï¼Œç»“æœ: 1 5
-> æ­£åœ¨æ‰§è¡Œæ­¥éª¤ 2/4: è®¡ç®—å‘¨äºŒå–å‡ºçš„è‹¹æœæ•°é‡: å‘¨ä¸€æ•°é‡ Ã— 2 = 1 5 Ã— 2 = 3 0ä¸ª
ğŸ§  æ­£åœ¨è°ƒç”¨ xxxx æ¨¡å‹...
âœ… å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸ:
3 0
âœ… æ­¥éª¤ 2 å·²å®Œæˆï¼Œç»“æœ: 3 01
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
1 6
1 7
1 8
1 9
2 0
2 1
2 2
2 3
2 4
2 5
2 6

--- ç¬¬93é¡µ ---

ä»ä¸Šé¢çš„è¾“å‡ºæ—¥å¿—ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°  Plan-and-Solve èŒƒå¼çš„å·¥ä½œæµç¨‹ï¼š
1. è§„åˆ’é˜¶æ®µ ï¼š æ™ºèƒ½ä½“é¦–å…ˆè°ƒç”¨  Plannerï¼ŒæˆåŠŸåœ°å°†å¤æ‚çš„åº”ç”¨é¢˜åˆ†è§£æˆäº†ä¸€ä¸ªåŒ…å«å››ä¸ªé€»è¾‘æ­¥éª¤çš„  Python åˆ—
è¡¨ã€‚è¿™ä¸ªç»“æ„åŒ–çš„è®¡åˆ’ä¸ºåç»­çš„æ‰§è¡Œå¥ å®šäº†åŸºç¡€ã€‚
2. æ‰§è¡Œé˜¶æ®µ ï¼š Executor ä¸¥æ ¼æŒ‰ç…§ç”Ÿæˆçš„è®¡åˆ’ï¼Œä¸€æ­¥ä¸€æ­¥åœ°å‘ä¸‹æ‰§è¡Œã€‚åœ¨æ¯ä¸€æ­¥ä¸­ï¼Œå®ƒéƒ½å°†å†å²ç»“æœä½œä¸ºä¸Šä¸‹
æ–‡ï¼Œç¡®ä¿äº†ä¿¡æ¯çš„æ­£ç¡®ä¼ é€’ï¼ˆä¾‹å¦‚ï¼Œæ­¥éª¤ 2æ­£ç¡®åœ°ä½¿ç”¨äº†æ­¥éª¤ 1çš„ç»“æœ â€œ15ä¸ªâ€ï¼Œæ­¥éª¤ 3ä¹Ÿæ­£ç¡®ä½¿ç”¨äº†æ­¥éª¤ 2çš„ç»“æœ
â€œ30ä¸ªâ€ï¼‰ã€‚
3. ç»“æœï¼šæ•´ä¸ªè¿‡ç¨‹é€»è¾‘æ¸…æ™°ï¼Œæ­¥éª¤æ˜ç¡®ï¼Œæœ€ç»ˆæ™ºèƒ½ä½“å‡†ç¡®åœ°å¾—å‡ºäº†æ­£ç¡®ç­”æ¡ˆ â€œ70ä¸ªâ€ã€‚
4.4 Reflection  
åœ¨æˆ‘ä»¬å·²ç»å®ç°çš„  ReAct å’Œ Plan-and-Solve èŒƒå¼ä¸­ï¼Œæ™ºèƒ½ä½“ä¸€æ—¦å®Œæˆäº†ä»»åŠ¡ï¼Œå…¶å·¥ä½œæµç¨‹ä¾¿å‘Šç»“æŸã€‚ç„¶è€Œï¼Œå®ƒä»¬ç”Ÿæˆ
çš„åˆå§‹ç­”æ¡ˆï¼Œæ— è®ºæ˜¯è¡ŒåŠ¨è½¨è¿¹è¿˜æ˜¯æœ€ç»ˆç»“æœï¼Œéƒ½å¯èƒ½å­˜åœ¨è°¬è¯¯æˆ–æœ‰å¾…æ”¹è¿›ä¹‹å¤„ã€‚ Reflection æœºåˆ¶çš„æ ¸å¿ƒæ€æƒ³ï¼Œæ­£æ˜¯ä¸º
æ™ºèƒ½ä½“å¼•å…¥ä¸€ç§ äº‹åï¼ˆ post-hoc ï¼‰çš„è‡ªæˆ‘æ ¡æ­£å¾ªç¯ ï¼Œä½¿å…¶èƒ½å¤Ÿåƒäººç±»ä¸€æ ·ï¼Œå®¡è§†è‡ªå·±çš„å·¥ä½œï¼Œå‘ç°ä¸è¶³ï¼Œå¹¶è¿›è¡Œè¿­ä»£
ä¼˜åŒ–ã€‚
4.4.1 Reflection æœºåˆ¶çš„æ ¸å¿ƒæ€æƒ³  
Reflection æœºåˆ¶çš„çµæ„Ÿæ¥æºäºäººç±»çš„å­¦ä¹ è¿‡ç¨‹ï¼šæˆ‘ä»¬å®Œæˆåˆç¨¿åä¼šè¿›è¡Œæ ¡å¯¹ï¼Œè§£å‡ºæ•°å­¦é¢˜åä¼šè¿›è¡ŒéªŒç®—ã€‚è¿™ä¸€æ€æƒ³åœ¨
å¤šä¸ªç ”ç©¶ä¸­å¾—åˆ°äº†ä½“ç°ï¼Œä¾‹å¦‚  Shinn, Noah åœ¨2023å¹´æå‡ºçš„  Reflexion æ¡†æ¶[3]ã€‚å…¶æ ¸å¿ƒå·¥ä½œæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä¸€ä¸ªç®€æ´
çš„ä¸‰æ­¥å¾ªç¯ï¼š æ‰§è¡Œ  -> åæ€  -> ä¼˜åŒ–ã€‚
1. æ‰§è¡Œ  (Execution) ï¼šé¦–å…ˆï¼Œæ™ºèƒ½ä½“ä½¿ç”¨æˆ‘ä»¬ç†Ÿæ‚‰çš„æ–¹æ³•ï¼ˆå¦‚  ReAct æˆ– Plan-and-Solve ï¼‰å°è¯•å®Œæˆä»»åŠ¡ï¼Œç”Ÿæˆä¸€
ä¸ªåˆæ­¥çš„è§£å†³æ–¹æ¡ˆæˆ–è¡ŒåŠ¨è½¨è¿¹ã€‚è¿™å¯ä»¥çœ‹ä½œæ˜¯ â€œåˆç¨¿ â€ã€‚
2. åæ€  (Reflection) ï¼šæ¥ç€ï¼Œæ™ºèƒ½ä½“è¿›å…¥åæ€é˜¶æ®µã€‚å®ƒä¼šè°ƒç”¨ä¸€ä¸ªç‹¬ç«‹çš„ã€æˆ–è€…å¸¦æœ‰ç‰¹æ®Šæç¤ºè¯çš„å¤§è¯­è¨€æ¨¡å‹å®
ä¾‹ï¼Œæ¥æ‰®æ¼”ä¸€ä¸ª â€œè¯„å®¡å‘˜ â€çš„è§’è‰²ã€‚è¿™ä¸ª â€œè¯„å®¡å‘˜ â€ä¼šå®¡è§†ç¬¬ä¸€æ­¥ç”Ÿæˆçš„ â€œåˆç¨¿ â€ï¼Œå¹¶ä»å¤šä¸ªç»´åº¦è¿›è¡Œè¯„ä¼°ï¼Œä¾‹å¦‚ï¼š
äº‹å®æ€§é”™è¯¯ ï¼šæ˜¯å¦å­˜åœ¨ä¸å¸¸è¯†æˆ–å·²çŸ¥äº‹å®ç›¸æ‚–çš„å†…å®¹ï¼Ÿ
é€»è¾‘æ¼æ´ ï¼šæ¨ç†è¿‡ç¨‹æ˜¯å¦å­˜åœ¨ä¸è¿è´¯æˆ–çŸ›ç›¾ä¹‹å¤„ï¼Ÿ
æ•ˆç‡é—®é¢˜ ï¼šæ˜¯å¦æœ‰æ›´ç›´æ¥ã€æ›´ç®€æ´çš„è·¯å¾„æ¥å®Œæˆä»»åŠ¡ï¼Ÿ
é—æ¼ä¿¡æ¯ ï¼šæ˜¯å¦å¿½ç•¥äº†é—®é¢˜çš„æŸäº›å…³é”®çº¦æŸæˆ–æ–¹é¢ï¼Ÿ  æ ¹æ®è¯„ä¼°ï¼Œå®ƒä¼šç”Ÿæˆä¸€æ®µç»“æ„åŒ–çš„ åé¦ˆ  
(Feedback) ï¼ŒæŒ‡å‡ºå…·ä½“çš„é—®é¢˜æ‰€åœ¨å’Œæ”¹è¿›å»ºè®®ã€‚
3. ä¼˜åŒ–  (Refinement) ï¼šæœ€åï¼Œæ™ºèƒ½ä½“å°† â€œåˆç¨¿ â€å’Œâ€œåé¦ˆ â€ä½œä¸ºæ–°çš„ä¸Šä¸‹æ–‡ï¼Œå†æ¬¡è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹ï¼Œè¦æ±‚å®ƒæ ¹æ®åé¦ˆ-> æ­£åœ¨æ‰§è¡Œæ­¥éª¤ 3/4: è®¡ç®—å‘¨ä¸‰å–å‡ºçš„è‹¹æœæ•°é‡: å‘¨äºŒæ•°é‡ - 5 = 3 0 - 5 = 2 5ä¸ª
ğŸ§  æ­£åœ¨è°ƒç”¨ xxxx æ¨¡å‹...
âœ… å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸ:
2 5
âœ… æ­¥éª¤ 3 å·²å®Œæˆï¼Œç»“æœ: 2 5
-> æ­£åœ¨æ‰§è¡Œæ­¥éª¤ 4/4: è®¡ç®—ä¸‰å¤©æ€»é”€é‡: å‘¨ä¸€ + å‘¨äºŒ + å‘¨ä¸‰ = 1 5 + 3 0 + 2 5 = 7 0ä¸ª
ğŸ§  æ­£åœ¨è°ƒç”¨ xxxx æ¨¡å‹...
âœ… å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸ:
7 0
âœ… æ­¥éª¤ 4 å·²å®Œæˆï¼Œç»“æœ: 7 0
- - - ä»»åŠ¡å®Œæˆ - - -
æœ€ç»ˆç­”æ¡ˆ: 7 02 7
2 8
2 9
3 0
3 1
3 2
3 3
3 4
3 5
3 6
3 7
3 8
3 9
4 0
4 1

--- ç¬¬94é¡µ ---

å†…å®¹å¯¹åˆç¨¿è¿›è¡Œä¿®æ­£ï¼Œç”Ÿæˆä¸€ä¸ªæ›´å®Œå–„çš„ â€œä¿®è®¢ç¨¿ â€ã€‚
å¦‚å›¾ 4.3æ‰€ç¤ºï¼Œè¿™ä¸ªå¾ªç¯å¯ä»¥é‡å¤è¿›è¡Œå¤šæ¬¡ï¼Œç›´åˆ°åæ€é˜¶æ®µä¸å†å‘ç°æ–°çš„é—®é¢˜ï¼Œæˆ–è€…è¾¾åˆ°é¢„è®¾çš„è¿­ä»£æ¬¡æ•°ä¸Šé™ã€‚æˆ‘ä»¬å¯
ä»¥å°†è¿™ä¸ªè¿­ä»£ä¼˜åŒ–çš„è¿‡ç¨‹å½¢å¼åŒ–åœ°è¡¨è¾¾å‡ºæ¥ã€‚å‡è®¾   æ˜¯ç¬¬   æ¬¡è¿­ä»£äº§ç”Ÿçš„è¾“å‡ºï¼ˆ  ä¸ºåˆå§‹è¾“å‡ºï¼‰ï¼Œåæ€æ¨¡å‹  
 ä¼šç”Ÿæˆé’ˆå¯¹   çš„åé¦ˆ  ï¼š
éšåï¼Œä¼˜åŒ–æ¨¡å‹   ä¼šç»“åˆåŸå§‹ä»»åŠ¡ã€ä¸Šä¸€ç‰ˆè¾“å‡ºä»¥åŠåé¦ˆï¼Œç”Ÿæˆæ–°ä¸€ç‰ˆçš„è¾“å‡º  ï¼š
Â 
å›¾ 4.3 Reflection æœºåˆ¶ä¸­çš„ â€œæ‰§è¡Œ -åæ€ -ä¼˜åŒ– â€è¿­ä»£å¾ªç¯
Â 
ä¸å‰ä¸¤ç§èŒƒå¼ç›¸æ¯”ï¼Œ Reflection çš„ä»·å€¼åœ¨äºï¼š
å®ƒä¸ºæ™ºèƒ½ä½“æä¾›äº†ä¸€ä¸ªå†…éƒ¨çº é”™å›è·¯ï¼Œä½¿å…¶ä¸å†å®Œå…¨ä¾èµ–äºå¤–éƒ¨å·¥å…·çš„åé¦ˆï¼ˆ ReAct çš„ Observation ï¼‰ï¼Œä»è€Œ
èƒ½å¤Ÿä¿®æ­£æ›´é«˜å±‚æ¬¡çš„é€»è¾‘å’Œç­–ç•¥é”™è¯¯ã€‚
å®ƒå°†ä¸€æ¬¡æ€§çš„ä»»åŠ¡æ‰§è¡Œï¼Œè½¬å˜ä¸ºä¸€ä¸ªæŒç»­ä¼˜åŒ–çš„è¿‡ç¨‹ï¼Œæ˜¾è‘—æå‡äº†å¤æ‚ä»»åŠ¡çš„æœ€ç»ˆæˆåŠŸç‡å’Œç­”æ¡ˆè´¨é‡ã€‚
å®ƒä¸ºæ™ºèƒ½ä½“æ„å»ºäº†ä¸€ä¸ªä¸´æ—¶çš„ â€œçŸ­æœŸè®°å¿† â€ã€‚æ•´ä¸ª â€œæ‰§è¡Œ -åæ€ -ä¼˜åŒ– â€çš„è½¨è¿¹å½¢æˆäº†ä¸€ä¸ªå®è´µçš„ç»éªŒè®°å½•ï¼Œæ™ºèƒ½ä½“ä¸
ä»…çŸ¥é“æœ€ç»ˆç­”æ¡ˆï¼Œè¿˜è®°å¾—è‡ªå·±æ˜¯å¦‚ä½•ä»æœ‰ç¼ºé™·çš„åˆç¨¿è¿­ä»£åˆ°æœ€ç»ˆç‰ˆæœ¬çš„ã€‚æ›´è¿›ä¸€æ­¥ï¼Œè¿™ä¸ªè®°å¿†ç³»ç»Ÿè¿˜å¯ä»¥æ˜¯ å¤š
æ¨¡æ€çš„ï¼Œå…è®¸æ™ºèƒ½ä½“åæ€å’Œä¿®æ­£æ–‡æœ¬ä»¥å¤–çš„è¾“å‡ºï¼ˆå¦‚ä»£ç ã€å›¾åƒç­‰ï¼‰ï¼Œä¸ºæ„å»ºæ›´å¼ºå¤§çš„å¤šæ¨¡æ€æ™ºèƒ½ä½“å¥ å®šäº†åŸº
ç¡€ã€‚

--- ç¬¬95é¡µ ---

4.4.2 æ¡ˆä¾‹è®¾å®šä¸è®°å¿†æ¨¡å—è®¾è®¡  
ä¸ºäº†åœ¨å®æˆ˜ä¸­ä½“ç°  Reflection æœºåˆ¶ï¼Œæˆ‘ä»¬å°†å¼•å…¥è®°å¿†ç®¡ç†æœºåˆ¶ï¼Œå› ä¸º reflection é€šå¸¸å¯¹åº”ç€ä¿¡æ¯çš„å­˜å‚¨å’Œæå–ï¼Œå¦‚æœä¸Š
ä¸‹æ–‡è¶³å¤Ÿé•¿çš„æƒ…å†µï¼Œæƒ³è®© â€œè¯„å®¡å‘˜ â€ç›´æ¥è·å–æ‰€æœ‰çš„ä¿¡æ¯ç„¶åè¿›è¡Œåæ€å¾€å¾€ä¼šä¼ å…¥å¾ˆå¤šå†—ä½™ä¿¡æ¯ã€‚è¿™ä¸€æ­¥å®è·µæˆ‘ä»¬ä¸»è¦
å®Œæˆä»£ç ç”Ÿæˆä¸è¿­ä»£ä¼˜åŒ– ã€‚
è¿™ä¸€æ­¥çš„ç›®æ ‡ä»»åŠ¡æ˜¯ï¼š â€œç¼–å†™ä¸€ä¸ª Pythonå‡½æ•°ï¼Œæ‰¾å‡º 1åˆ°nä¹‹é—´æ‰€æœ‰çš„ç´ æ•°  (prime numbers) ã€‚â€
è¿™ä¸ªä»»åŠ¡æ˜¯æ£€éªŒ  Reflection æœºåˆ¶çš„ç»ä½³åœºæ™¯ï¼š
1. å­˜åœ¨æ˜ç¡®çš„ä¼˜åŒ–è·¯å¾„ ï¼šå¤§è¯­è¨€æ¨¡å‹åˆæ¬¡ç”Ÿæˆçš„ä»£ç å¾ˆå¯èƒ½æ˜¯ä¸€ä¸ªç®€å•ä½†æ•ˆç‡ä½ä¸‹çš„é€’å½’å®ç°ã€‚
2. åæ€ç‚¹æ¸…æ™° ï¼šå¯ä»¥é€šè¿‡åæ€å‘ç°å…¶ â€œæ—¶é—´å¤æ‚åº¦è¿‡é«˜ â€æˆ–â€œå­˜åœ¨é‡å¤è®¡ç®— â€çš„é—®é¢˜ã€‚
3. ä¼˜åŒ–æ–¹å‘æ˜ç¡® ï¼šå¯ä»¥æ ¹æ®åé¦ˆï¼Œå°†å…¶ä¼˜åŒ–ä¸ºæ›´é«˜æ•ˆçš„è¿­ä»£ç‰ˆæœ¬æˆ–ä½¿ç”¨å¤‡å¿˜å½•æ¨¡å¼çš„ç‰ˆæœ¬ã€‚
Reflection çš„æ ¸å¿ƒåœ¨äºè¿­ä»£ï¼Œè€Œè¿­ä»£çš„å‰ææ˜¯èƒ½å¤Ÿè®°ä½ä¹‹å‰çš„å°è¯•å’Œè·å¾—çš„åé¦ˆã€‚å› æ­¤ï¼Œä¸€ä¸ª â€œçŸ­æœŸè®°å¿† â€æ¨¡å—æ˜¯å®ç°è¯¥
èŒƒå¼çš„å¿…éœ€å“ã€‚è¿™ä¸ªè®°å¿†æ¨¡å—å°†è´Ÿè´£å­˜å‚¨æ¯ä¸€æ¬¡ â€œæ‰§è¡Œ -åæ€ â€å¾ªç¯çš„å®Œæ•´è½¨è¿¹ã€‚
from typing import List, Dict, Any, Optional
class Memory:
 Â  Â """
 Â   ä¸€ä¸ªç®€å•çš„çŸ­æœŸè®°å¿†æ¨¡å—ï¼Œç”¨äºå­˜å‚¨æ™ºèƒ½ä½“çš„è¡ŒåŠ¨ä¸åæ€è½¨è¿¹ã€‚
 Â   """
 Â  Â def __init__(self):
 Â  Â  Â  Â """
 Â  Â  Â   åˆå§‹åŒ–ä¸€ä¸ªç©ºåˆ—è¡¨æ¥å­˜å‚¨æ‰€æœ‰è®°å½•ã€‚
 Â  Â  Â   """
 Â  Â  Â  Â self.records: List[Dict[str, Any]] = []
 Â  Â def add_record(self, record_type: str, content: str):
 Â  Â  Â  Â """
 Â  Â  Â   å‘è®°å¿†ä¸­æ·»åŠ ä¸€æ¡æ–°è®°å½•ã€‚
 Â  Â  Â   å‚æ•°:
 Â  Â  Â   - record_type (str): è®°å½•çš„ç±»å‹ ('execution' æˆ– 'reflection')ã€‚
 Â  Â  Â   - content (str): è®°å½•çš„å…·ä½“å†…å®¹ (ä¾‹å¦‚ï¼Œç”Ÿæˆçš„ä»£ç æˆ–åæ€çš„åé¦ˆ)ã€‚
 Â  Â  Â   """
 Â  Â  Â  Â record = {"type": record_type, "content": content}
 Â  Â  Â  Â self.records.append(record)
 Â  Â  Â  Â print(f"ğŸ“ è®°å¿†å·²æ›´æ–°ï¼Œæ–°å¢ä¸€æ¡ '{record_type}' è®°å½•ã€‚")
 Â  Â def get_trajectory(self) -> str:
 Â  Â  Â  Â """
 Â  Â  Â   å°†æ‰€æœ‰è®°å¿†è®°å½•æ ¼å¼åŒ–ä¸ºä¸€ä¸ªè¿è´¯çš„å­—ç¬¦ä¸²æ–‡æœ¬ï¼Œç”¨äºæ„å»ºæç¤ºè¯ã€‚
 Â  Â  Â   """
 Â  Â  Â  Â trajectory_parts = []
 Â  Â  Â  Â for record in self.records:
 Â  Â  Â  Â  Â  Â if record['type'] == 'execution':
 Â  Â  Â  Â  Â  Â  Â  Â trajectory_parts.append(f"--- ä¸Šä¸€è½®å°è¯• (ä»£ç ) ---\n{record['content']}")
 Â  Â  Â  Â  Â  Â elif record['type'] == 'reflection':
 Â  Â  Â  Â  Â  Â  Â  Â trajectory_parts.append(f"--- è¯„å®¡å‘˜åé¦ˆ ---\n{record['content']}")
 Â  Â  Â  Â 1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
1 6
1 7
1 8
1 9
2 0
2 1
2 2
2 3
2 4
2 5
2 6
2 7
2 8
2 9
3 0
3 1
3 2
3 3
3 4
3 5
3 6

--- ç¬¬96é¡µ ---

è¿™ä¸ª  Memory ç±»çš„è®¾è®¡æ¯”è¾ƒç®€æ´ï¼Œä¸»ä½“æ˜¯è¿™æ ·çš„ï¼š
ä½¿ç”¨ä¸€ä¸ªåˆ—è¡¨  records æ¥æŒ‰é¡ºåºå­˜å‚¨æ¯ä¸€æ¬¡çš„è¡ŒåŠ¨å’Œåæ€ã€‚
add_record æ–¹æ³•è´Ÿè´£å‘è®°å¿†ä¸­æ·»åŠ æ–°çš„æ¡ç›®ã€‚
get_trajectory æ–¹æ³•æ˜¯æ ¸å¿ƒï¼Œå®ƒå°†è®°å¿†è½¨è¿¹ â€œåºåˆ—åŒ– â€æˆä¸€æ®µæ–‡æœ¬ï¼Œå¯ä»¥ç›´æ¥æ’å…¥åˆ°åç»­çš„æç¤ºè¯ä¸­ï¼Œä¸ºæ¨¡å‹
çš„åæ€å’Œä¼˜åŒ–æä¾›å®Œæ•´çš„ä¸Šä¸‹æ–‡ã€‚
get_last_execution æ–¹ä¾¿æˆ‘ä»¬è·å–æœ€æ–°çš„ â€œåˆç¨¿ â€ä»¥ä¾›åæ€ã€‚
Â 
4.4.3 Reflection æ™ºèƒ½ä½“çš„ç¼–ç å®ç°  
æœ‰äº†  Memory æ¨¡å—ä½œä¸ºåŸºç¡€ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ç€æ‰‹æ„å»º  ReflectionAgent çš„æ ¸å¿ƒé€»è¾‘ã€‚æ•´ä¸ªæ™ºèƒ½ä½“çš„å·¥ä½œæµç¨‹å°†å›´ç»•
æˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„ â€œæ‰§è¡Œ -åæ€ -ä¼˜åŒ– â€å¾ªç¯å±•å¼€ï¼Œå¹¶é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯æ¥å¼•å¯¼å¤§è¯­è¨€æ¨¡å‹æ‰®æ¼”ä¸åŒçš„è§’è‰²ã€‚
ï¼ˆ1ï¼‰æç¤ºè¯è®¾è®¡
ä¸ä¹‹å‰çš„èŒƒå¼ä¸åŒï¼Œ Reflection æœºåˆ¶éœ€è¦å¤šä¸ªä¸åŒè§’è‰²çš„æç¤ºè¯æ¥ååŒå·¥ä½œã€‚
1. åˆå§‹æ‰§è¡Œæç¤ºè¯  (Execution Prompt)  ï¼šè¿™æ˜¯æ™ºèƒ½ä½“é¦–æ¬¡å°è¯•è§£å†³é—®é¢˜çš„æç¤ºè¯ï¼Œå†…å®¹ç›¸å¯¹ç›´æ¥ï¼Œåªè¦æ±‚æ¨¡å‹
å®ŒæˆæŒ‡å®šä»»åŠ¡ã€‚
2. åæ€æç¤ºè¯  (Reflection Prompt)  ï¼šè¿™ä¸ªæç¤ºè¯æ˜¯  Reflection æœºåˆ¶çš„çµé­‚ã€‚å®ƒæŒ‡ç¤ºæ¨¡å‹æ‰®æ¼” â€œä»£ç è¯„å®¡å‘˜ â€çš„è§’
è‰²ï¼Œå¯¹ä¸Šä¸€è½®ç”Ÿæˆçš„ä»£ç è¿›è¡Œæ‰¹åˆ¤æ€§åˆ†æï¼Œå¹¶æä¾›å…·ä½“çš„ã€å¯æ“ä½œçš„åé¦ˆã€‚ Â  Â  Â  Â return "\n\n".join(trajectory_parts)
 Â  Â def get_last_execution(self) -> Optional[str]:
 Â  Â  Â  Â """
 Â  Â  Â   è·å–æœ€è¿‘ä¸€æ¬¡çš„æ‰§è¡Œç»“æœ (ä¾‹å¦‚ï¼Œæœ€æ–°ç”Ÿæˆçš„ä»£ç )ã€‚
 Â  Â  Â   å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› Noneã€‚
 Â  Â  Â   """
 Â  Â  Â  Â for record in reversed(self.records):
 Â  Â  Â  Â  Â  Â if record['type'] == 'execution':
 Â  Â  Â  Â  Â  Â  Â  Â return record['content']
 Â  Â  Â  Â return None3 7
3 8
3 9
4 0
4 1
4 2
4 3
4 4
4 5
4 6
4 7
INITIAL_PROMPT_TEMPLATE = """
ä½ æ˜¯ä¸€ä½èµ„æ·±çš„Pythonç¨‹åºå‘˜ã€‚è¯·æ ¹æ®ä»¥ä¸‹è¦æ±‚ï¼Œç¼–å†™ä¸€ä¸ªPythonå‡½æ•°ã€‚
ä½ çš„ä»£ç å¿…é¡»åŒ…å«å®Œæ•´çš„å‡½æ•°ç­¾åã€æ–‡æ¡£å­—ç¬¦ä¸²ï¼Œå¹¶éµå¾ªPEP 8ç¼–ç è§„èŒƒã€‚
è¦æ±‚: {task}
è¯·ç›´æ¥è¾“å‡ºä»£ç ï¼Œä¸è¦åŒ…å«ä»»ä½•é¢å¤–çš„è§£é‡Šã€‚
"""1
2
3
4
5
6
7
8
REFLECT_PROMPT_TEMPLATE = """
ä½ æ˜¯ä¸€ä½æå…¶ä¸¥æ ¼çš„ä»£ç è¯„å®¡ä¸“å®¶å’Œèµ„æ·±ç®—æ³•å·¥ç¨‹å¸ˆï¼Œå¯¹ä»£ç çš„æ€§èƒ½æœ‰æè‡´çš„è¦æ±‚ã€‚
ä½ çš„ä»»åŠ¡æ˜¯å®¡æŸ¥ä»¥ä¸‹Pythonä»£ç ï¼Œå¹¶ä¸“æ³¨äºæ‰¾å‡ºå…¶åœ¨<strong>ç®—æ³•æ•ˆç‡</strong>ä¸Šçš„ä¸»è¦ç“¶é¢ˆã€‚
# åŸå§‹ä»»åŠ¡:
{task}1
2
3
4
5
6

--- ç¬¬97é¡µ ---

3. ä¼˜åŒ–æç¤ºè¯  (Refinement Prompt)  ï¼šå½“æ”¶åˆ°åé¦ˆåï¼Œè¿™ä¸ªæç¤ºè¯å°†å¼•å¯¼æ¨¡å‹æ ¹æ®åé¦ˆå†…å®¹ï¼Œå¯¹åŸæœ‰ä»£ç è¿›è¡Œ
ä¿®æ­£å’Œä¼˜åŒ–ã€‚
ï¼ˆ2ï¼‰æ™ºèƒ½ä½“å°è£…ä¸å®ç°
ç°åœ¨ï¼Œæˆ‘ä»¬å°†è¿™å¥—æç¤ºè¯é€»è¾‘å’Œ  Memory æ¨¡å—æ•´åˆåˆ°  ReflectionAgent ç±»ä¸­ã€‚# å¾…å®¡æŸ¥çš„ä»£ç :
```python
{code}
```
è¯·åˆ†æè¯¥ä»£ç çš„æ—¶é—´å¤æ‚åº¦ï¼Œå¹¶æ€è€ƒæ˜¯å¦å­˜åœ¨ä¸€ç§<strong>ç®—æ³•ä¸Šæ›´ä¼˜</strong>çš„è§£å†³æ–¹æ¡ˆæ¥æ˜¾è‘—æå‡æ€§èƒ½ã€‚
å¦‚æœå­˜åœ¨ï¼Œè¯·æ¸…æ™°åœ°æŒ‡å‡ºå½“å‰ç®—æ³•çš„ä¸è¶³ï¼Œå¹¶æå‡ºå…·ä½“çš„ã€å¯è¡Œçš„æ”¹è¿›ç®—æ³•å»ºè®®ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ç­›æ³•æ›¿ä»£è¯•é™¤æ³•ï¼‰ã€‚
å¦‚æœä»£ç åœ¨ç®—æ³•å±‚é¢å·²ç»è¾¾åˆ°æœ€ä¼˜ï¼Œæ‰èƒ½å›ç­”â€œæ— éœ€æ”¹è¿›â€ã€‚
è¯·ç›´æ¥è¾“å‡ºä½ çš„åé¦ˆï¼Œä¸è¦åŒ…å«ä»»ä½•é¢å¤–çš„è§£é‡Šã€‚
"""7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
1 6
1 7
1 8
REFINE_PROMPT_TEMPLATE = """
ä½ æ˜¯ä¸€ä½èµ„æ·±çš„Pythonç¨‹åºå‘˜ã€‚ä½ æ­£åœ¨æ ¹æ®ä¸€ä½ä»£ç è¯„å®¡ä¸“å®¶çš„åé¦ˆæ¥ä¼˜åŒ–ä½ çš„ä»£ç ã€‚
# åŸå§‹ä»»åŠ¡:
{task}
# ä½ ä¸Šä¸€è½®å°è¯•çš„ä»£ç :
```
{last_code_attempt}
è¯„å®¡å‘˜çš„åé¦ˆï¼š
{feedback}
è¯·æ ¹æ®è¯„å®¡å‘˜çš„åé¦ˆï¼Œç”Ÿæˆä¸€ä¸ªä¼˜åŒ–åçš„æ–°ç‰ˆæœ¬ä»£ç ã€‚
ä½ çš„ä»£ç å¿…é¡»åŒ…å«å®Œæ•´çš„å‡½æ•°ç­¾åã€æ–‡æ¡£å­—ç¬¦ä¸²ï¼Œå¹¶éµå¾ªPEP 8ç¼–ç è§„èŒƒã€‚
è¯·ç›´æ¥è¾“å‡ºä¼˜åŒ–åçš„ä»£ç ï¼Œä¸è¦åŒ…å«ä»»ä½•é¢å¤–çš„è§£é‡Šã€‚
"""1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
1 6
1 7
# å‡è®¾ llm_client.py å’Œ memory.py å·²å®šä¹‰
# from llm_client import HelloAgentsLLM
# from memory import Memory
class ReflectionAgent:
 Â  Â def __init__(self, llm_client, max_iterations= 3):
 Â  Â  Â  Â self.llm_client = llm_client
 Â  Â  Â  Â self.memory = Memory()
 Â  Â  Â  Â self.max_iterations = max_iterations
 Â  Â def run(self, task: str):
 Â  Â  Â  Â print(f"\n--- å¼€å§‹å¤„ç†ä»»åŠ¡ ---\nä»»åŠ¡: {task}")
 Â  Â  Â  Â # --- 1. åˆå§‹æ‰§è¡Œ ---1
2
3
4
5
6
7
8
9
1 0
1 1
1 2
1 3
1 4

--- ç¬¬98é¡µ ---

4.4.4 è¿è¡Œå®ä¾‹ä¸åˆ†æ  
å®Œæ•´çš„ä»£ç åŒæ ·å‚è€ƒæœ¬ä¹¦é…å¥—çš„ä»£ç ä»“åº“  code æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªè¾“å‡ºå®ä¾‹ã€‚ Â  Â  Â  Â print("\n--- æ­£åœ¨è¿›è¡Œåˆå§‹å°è¯• ---")
 Â  Â  Â  Â initial_prompt = INITIAL_PROMPT_TEMPLATE.format(task=task)
 Â  Â  Â  Â initial_code = self._get_llm_response(initial_prompt)
 Â  Â  Â  Â self.memory.add_record("execution", initial_code)
 Â  Â  Â  Â # --- 2. è¿­ä»£å¾ªç¯:åæ€ä¸ä¼˜åŒ– ---
 Â  Â  Â  Â for i in range(self.max_iterations):
 Â  Â  Â  Â  Â  Â print(f"\n--- ç¬¬ {i+ 1}/{self.max_iterations} è½®è¿­ä»£ ---")
 Â  Â  Â  Â  Â  Â # a. åæ€
 Â  Â  Â  Â  Â  Â print("\n-> æ­£åœ¨è¿›è¡Œåæ€...")
 Â  Â  Â  Â  Â  Â last_code = self.memory.get_last_execution()
 Â  Â  Â  Â  Â  Â reflect_prompt = REFLECT_PROMPT_TEMPLATE.format(task=task, code=last_code)
 Â  Â  Â  Â  Â  Â feedback = self._get_llm_response(reflect_prompt)
 Â  Â  Â  Â  Â  Â self.memory.add_record("reflection", feedback)
 Â  Â  Â  Â  Â  Â # b. æ£€æŸ¥æ˜¯å¦éœ€è¦åœæ­¢
 Â  Â  Â  Â  Â  Â if "æ— éœ€æ”¹è¿›" in feedback:
 Â  Â  Â  Â  Â  Â  Â  Â print("\nâœ… åæ€è®¤ä¸ºä»£ç å·²æ— éœ€æ”¹è¿›ï¼Œä»»åŠ¡å®Œæˆã€‚")
 Â  Â  Â  Â  Â  Â  Â  Â break
 Â  Â  Â  Â  Â  Â # c. ä¼˜åŒ–
 Â  Â  Â  Â  Â  Â print("\n-> æ­£åœ¨è¿›è¡Œä¼˜åŒ–...")
 Â  Â  Â  Â  Â  Â refine_prompt = REFINE_PROMPT_TEMPLATE.format(
 Â  Â  Â  Â  Â  Â  Â  Â task=task,
 Â  Â  Â  Â  Â  Â  Â  Â last_code_attempt=last_code,
 Â  Â  Â  Â  Â  Â  Â  Â feedback=feedback
 Â  Â  Â  Â  Â   )
 Â  Â  Â  Â  Â  Â refined_code = self._get_llm_response(refine_prompt)
 Â  Â  Â  Â  Â  Â self.memory.add_record("execution", refined_code)
 Â  Â  Â  Â 
 Â  Â  Â  Â final_code = self.memory.get_last_execution()
 Â  Â  Â  Â print(f"\n--- ä»»åŠ¡å®Œæˆ ---\næœ€ç»ˆç”Ÿæˆçš„ä»£ç :\n```python\n{final_code}\n```")
 Â  Â  Â  Â return final_code
 Â  Â def _get_llm_response(self, prompt: str) -> str:
 Â  Â  Â  Â """ä¸€ä¸ªè¾…åŠ©æ–¹æ³•ï¼Œç”¨äºè°ƒç”¨LLMå¹¶è·å–å®Œæ•´çš„æµå¼å“åº”ã€‚"""
 Â  Â  Â  Â messages = [{"role": "user", "content": prompt}]
 Â  Â  Â  Â rresponse_text = self.llm_client.think(messages=messages) or ""
 Â  Â  Â  Â return response_text1 5
1 6
1 7
1 8
1 9
2 0
2 1
2 2
2 3
2 4
2 5
2 6
2 7
2 8
2 9
3 0
3 1
3 2
3 3
3 4
3 5
3 6
3 7
3 8
3 9
4 0
4 1
4 2
4 3
4 4
4 5
4 6
4 7
4 8
4 9
5 0
5 1
5 2
5 3
5 4
5 5
--- å¼€å§‹å¤„ç†ä»»åŠ¡ ---
ä»»åŠ¡ï¼š ç¼–å†™ä¸€ä¸ªPythonå‡½æ•°ï¼Œæ‰¾å‡º1åˆ°nä¹‹é—´æ‰€æœ‰çš„ç´ æ•° (prime numbers)ã€‚
--- æ­£åœ¨è¿›è¡Œåˆå§‹å°è¯• ---
ğŸ§  æ­£åœ¨è°ƒç”¨ xxxxxx æ¨¡å‹...
âœ… å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸï¼š1
2
3
4
5
6

--- ç¬¬99é¡µ ---

```python
def find_primes(n):
 Â  Â ...
 Â  Â return primes
```
ğŸ“ è®°å¿†å·²æ›´æ–°ï¼Œæ–°å¢ä¸€æ¡ 'execution' è®°å½•ã€‚ Â  
--- ç¬¬ 1/ 2 è½®è¿­ä»£ ---
-> æ­£åœ¨è¿›è¡Œåæ€...
ğŸ§  æ­£åœ¨è°ƒç”¨ xxxxxx æ¨¡å‹...
âœ… å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸï¼š
å½“å‰ä»£ç çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n * sqrt(n))ã€‚è™½ç„¶å¯¹äºè¾ƒå°çš„nå€¼ï¼Œè¿™ç§å®ç°æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä½†å½“néå¸¸å¤§æ—¶ï¼Œæ€§èƒ½ä¼šæ˜¾
è‘—ä¸‹é™ã€‚ä¸»è¦ç“¶é¢ˆåœ¨äºæ¯ä¸ªæ•°éƒ½éœ€è¦è¿›è¡Œè¯•é™¤æ³•æ£€æŸ¥ï¼Œè¿™å¯¼è‡´äº†è¾ƒé«˜çš„æ—¶é—´å¼€é”€ã€‚
å»ºè®®ä½¿ç”¨åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•ï¼ˆSieve of Eratosthenesï¼‰ï¼Œè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n log(log n))ï¼Œèƒ½å¤Ÿæ˜¾è‘—æ
é«˜æŸ¥æ‰¾ç´ æ•°çš„æ•ˆç‡ã€‚
æ”¹è¿›åçš„ä»£ç å¦‚ä¸‹ï¼š
```python
def find_primes(n):
 Â  Â ...
 Â  Â return primes
```
ğŸ“ è®°å¿†å·²æ›´æ–°ï¼Œæ–°å¢ä¸€æ¡ 'reflection' è®°å½•ã€‚
-> æ­£åœ¨è¿›è¡Œä¼˜åŒ–...
ğŸ§  æ­£åœ¨è°ƒç”¨ xxxxxx æ¨¡å‹...
âœ… å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸï¼š
```python
def find_primes(n):
 Â  Â ...
 Â  Â return primes
```
ğŸ“ è®°å¿†å·²æ›´æ–°ï¼Œæ–°å¢ä¸€æ¡ 'execution' è®°å½•ã€‚
--- ç¬¬ 2/ 2 è½®è¿­ä»£ ---
-> æ­£åœ¨è¿›è¡Œåæ€...
ğŸ§  æ­£åœ¨è°ƒç”¨ xxxxxx æ¨¡å‹...
âœ… å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸï¼š
å½“å‰ä»£ç ä½¿ç”¨äº†Eratosthenesç­›æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n log log n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(n)ã€‚æ­¤ç®—æ³•åœ¨å¯»æ‰¾1åˆ°nä¹‹é—´
çš„æ‰€æœ‰ç´ æ•°æ—¶å·²ç»éå¸¸é«˜æ•ˆï¼Œé€šå¸¸æƒ…å†µä¸‹æ— éœ€è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚ä½†åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹æ”¹è¿›ï¼š
1 . <strong>åˆ†æ®µç­›æ³•ï¼ˆSegmented Sieveï¼‰</strong>ï¼šé€‚ç”¨äºnéå¸¸å¤§ä½†å†…å­˜æœ‰é™çš„æƒ…å†µã€‚å°†åŒºé—´åˆ†æˆå¤šä¸ªå°
æ®µï¼Œæ¯æ®µåˆ†åˆ«ç”¨ç­›æ³•å¤„ç†ï¼Œå‡å°‘å†…å­˜ä½¿ç”¨ã€‚
2 . <strong>å¥‡æ•°ç­›æ³•ï¼ˆOdd Number Sieveï¼‰</strong>ï¼šé™¤äº†2ä»¥å¤–ï¼Œæ‰€æœ‰ç´ æ•°éƒ½æ˜¯å¥‡æ•°ã€‚å¯ä»¥åœ¨åˆå§‹åŒ–
`is_prime`æ•°ç»„æ—¶åªæ ‡è®°å¥‡æ•°ï¼Œè¿™æ ·å¯ä»¥å°†ç©ºé—´å¤æ‚åº¦é™ä½ä¸€åŠï¼ŒåŒæ—¶å‡å°‘ä¸€äº›ä¸å¿…è¦çš„è®¡ç®—ã€‚
ç„¶è€Œï¼Œè¿™äº›æ”¹è¿›å¯¹äºå¤§å¤šæ•°åº”ç”¨åœºæ™¯æ¥è¯´å¹¶ä¸æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºæ ‡å‡†çš„Eratosthenesç­›æ³•å·²ç»è¶³å¤Ÿé«˜æ•ˆã€‚å› æ­¤ï¼Œåœ¨ä¸€èˆ¬
æƒ…å†µä¸‹ï¼Œ<strong>æ— éœ€æ”¹è¿›</strong>ã€‚
ğŸ“ è®°å¿†å·²æ›´æ–°ï¼Œæ–°å¢ä¸€æ¡ 'reflection' è®°å½•ã€‚7
8
9
1 0
1 1
1 2
1 3
1 4
1 5
1 6
1 7
1 8
1 9
2 0
2 1
2 2
2 3
2 4
2 5
2 6
2 7
2 8
2 9
3 0
3 1
3 2
3 3
3 4
3 5
3 6
3 7
3 8
3 9
4 0
4 1
4 2
4 3
4 4
4 5
4 6
4 7
4 8
4 9
5 0
5 1
5 2
5 3

--- ç¬¬100é¡µ ---

è¿™ä¸ªè¿è¡Œå®ä¾‹å±•ç¤ºäº†  Reflection æœºåˆ¶æ˜¯å¦‚ä½•é©±åŠ¨æ™ºèƒ½ä½“è¿›è¡Œæ·±åº¦ä¼˜åŒ–çš„ :
1. æœ‰æ•ˆçš„ â€œæ‰¹åˆ¤ â€æ˜¯ä¼˜åŒ–çš„å‰æ :åœ¨ç¬¬ä¸€è½®åæ€ä¸­ï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨äº† â€œæå…¶ä¸¥æ ¼ â€ä¸”â€œä¸“æ³¨äºç®—æ³•æ•ˆç‡ â€çš„æç¤ºè¯ï¼Œæ™ºèƒ½
ä½“æ²¡æœ‰æ»¡è¶³äºåŠŸèƒ½æ­£ç¡®çš„åˆç‰ˆä»£ç ï¼Œè€Œæ˜¯ç²¾å‡†åœ°æŒ‡å‡ºäº†å…¶  O(n * sqrt(n)) çš„æ—¶é—´å¤æ‚åº¦ç“¶é¢ˆï¼Œå¹¶æå‡ºäº†ç®—
æ³•å±‚é¢çš„æ”¹è¿›å»ºè®® â€”â€”åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•ã€‚
2. è¿­ä»£å¼æ”¹è¿› : æ™ºèƒ½ä½“åœ¨æ¥æ”¶åˆ°æ˜ç¡®çš„åé¦ˆåï¼Œäºä¼˜åŒ–é˜¶æ®µæˆåŠŸåœ°å®ç°äº†æ›´é«˜æ•ˆçš„ç­›æ³•ï¼Œå°†ç®—æ³•å¤æ‚åº¦é™è‡³  O(n 
log log n)ï¼Œå®Œæˆäº†ç¬¬ä¸€æ¬¡æœ‰æ„ä¹‰çš„è‡ªæˆ‘è¿­ä»£ã€‚
3. æ”¶æ•›ä¸ç»ˆæ­¢ : åœ¨ç¬¬äºŒè½®åæ€ä¸­ï¼Œæ™ºèƒ½ä½“é¢å¯¹å·²ç»é«˜æ•ˆçš„ç­›æ³•ï¼Œå±•ç°å‡ºäº†æ›´æ·±å±‚æ¬¡çš„çŸ¥è¯†ã€‚å®ƒä¸ä»…è‚¯å®šäº†å½“å‰ç®—æ³•
çš„æ•ˆç‡ï¼Œç”šè‡³è¿˜æåŠäº†åˆ†æ®µç­›æ³•ç­‰æ›´é«˜çº§çš„ä¼˜åŒ–æ–¹å‘ï¼Œä½†æœ€ç»ˆåšå‡ºäº† â€œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹æ— éœ€æ”¹è¿› â€çš„æ­£ç¡®åˆ¤æ–­ã€‚è¿™
ä¸ªåˆ¤æ–­è§¦å‘äº†æˆ‘ä»¬çš„ç»ˆæ­¢æ¡ä»¶ï¼Œä½¿ä¼˜åŒ–è¿‡ç¨‹å¾—ä»¥æ”¶æ•›ã€‚
è¿™ä¸ªæ¡ˆä¾‹å……åˆ†è¯æ˜ï¼Œä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„  Reflection æœºåˆ¶ï¼Œå…¶ä»·å€¼ä¸ä»…åœ¨äºä¿®å¤é”™è¯¯ï¼Œæ›´åœ¨äº é©±åŠ¨è§£å†³æ–¹æ¡ˆåœ¨è´¨é‡å’Œæ•ˆç‡
ä¸Šå®ç°é˜¶æ¢¯å¼çš„æå‡ ï¼Œè¿™ä½¿å…¶æˆä¸ºæ„å»ºå¤æ‚ã€é«˜è´¨é‡æ™ºèƒ½ä½“çš„å…³é”®æŠ€æœ¯ä¹‹ä¸€ã€‚
4.4.5 Reflection æœºåˆ¶çš„æˆæœ¬æ”¶ç›Šåˆ†æ  
å°½ç®¡  Reflection æœºåˆ¶åœ¨æå‡ä»»åŠ¡è§£å†³è´¨é‡ä¸Šè¡¨ç°å‡ºè‰²ï¼Œä½†è¿™ç§èƒ½åŠ›çš„è·å¾—å¹¶éæ²¡æœ‰ä»£ä»·ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æƒ
è¡¡å…¶å¸¦æ¥çš„æ”¶ç›Šä¸ç›¸åº”çš„æˆæœ¬ã€‚
ï¼ˆ1ï¼‰ä¸»è¦æˆæœ¬
1. æ¨¡å‹è°ƒç”¨å¼€é”€å¢åŠ  :è¿™æ˜¯æœ€ç›´æ¥çš„æˆæœ¬ã€‚æ¯è¿›è¡Œä¸€è½®è¿­ä»£ï¼Œè‡³å°‘éœ€è¦é¢å¤–è°ƒç”¨ä¸¤æ¬¡å¤§è¯­è¨€æ¨¡å‹ï¼ˆä¸€æ¬¡ç”¨äºåæ€ï¼Œ
ä¸€æ¬¡ç”¨äºä¼˜åŒ–ï¼‰ã€‚å¦‚æœè¿­ä»£å¤šè½®ï¼Œ API è°ƒç”¨æˆæœ¬å’Œè®¡ç®—èµ„æºæ¶ˆè€—å°†æˆå€å¢åŠ ã€‚âœ… åæ€è®¤ä¸ºä»£ç å·²æ— éœ€æ”¹è¿›ï¼Œä»»åŠ¡å®Œæˆã€‚
--- ä»»åŠ¡å®Œæˆ ---
æœ€ç»ˆç”Ÿæˆçš„ä»£ç ï¼š
```python
def find_primes(n):
 Â  Â """
 Â   Finds all prime numbers between 1 and n using the Sieve of Eratosthenes algorithm.
 Â   :param n: The upper limit of the range to find prime numbers.
 Â   :return: A list of all prime numbers between 1 and n.
 Â   """
 Â  Â if n < 2:
 Â  Â  Â  Â return []
 Â  Â is_prime = [True] * (n + 1)
 Â  Â is_prime[ 0] = is_prime[ 1] = False
 Â  Â p = 2
 Â  Â while p * p <= n:
 Â  Â  Â  Â if is_prime[p]:
 Â  Â  Â  Â  Â  Â for i in range(p * p, n + 1, p):
 Â  Â  Â  Â  Â  Â  Â  Â is_prime[i] = False
 Â  Â  Â  Â p += 1
 Â  Â primes = [num for num in range( 2, n + 1) if is_prime[num]]
 Â  Â return primes
```5 4
5 5
5 6
5 7
5 8
5 9
6 0
6 1
6 2
6 3
6 4
6 5
6 6
6 7
6 8
6 9
7 0
7 1
7 2
7 3
7 4
7 5
7 6
7 7
7 8
7 9
8 0
8 1

--- ç¬¬101é¡µ ---

2. ä»»åŠ¡å»¶è¿Ÿæ˜¾è‘—æé«˜ :Reflection æ˜¯ä¸€ä¸ªä¸²è¡Œè¿‡ç¨‹ï¼Œæ¯ä¸€è½®çš„ä¼˜åŒ–éƒ½å¿…é¡»ç­‰å¾…ä¸Šä¸€è½®çš„åæ€å®Œæˆã€‚è¿™ä½¿å¾—ä»»åŠ¡çš„æ€»
è€—æ—¶æ˜¾è‘—å»¶é•¿ï¼Œä¸é€‚åˆå¯¹å®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯ã€‚
3. æç¤ºå·¥ç¨‹å¤æ‚åº¦ä¸Šå‡ :å¦‚æˆ‘ä»¬çš„æ¡ˆä¾‹æ‰€ç¤ºï¼Œ Reflection çš„æˆåŠŸåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–äºé«˜è´¨é‡ã€æœ‰é’ˆå¯¹æ€§çš„æç¤ºè¯ã€‚
ä¸ºâ€œæ‰§è¡Œ â€ã€â€œåæ€ â€ã€â€œä¼˜åŒ– â€ç­‰ä¸åŒé˜¶æ®µè®¾è®¡å’Œè°ƒè¯•æœ‰æ•ˆçš„æç¤ºè¯ï¼Œéœ€è¦æŠ•å…¥æ›´å¤šçš„å¼€å‘ç²¾åŠ›ã€‚
ï¼ˆ2ï¼‰æ ¸å¿ƒæ”¶ç›Š
1. è§£å†³æ–¹æ¡ˆè´¨é‡çš„è·ƒè¿ :æœ€å¤§çš„æ”¶ç›Šåœ¨äºï¼Œå®ƒèƒ½å°†ä¸€ä¸ª â€œåˆæ ¼ â€çš„åˆå§‹æ–¹æ¡ˆï¼Œè¿­ä»£ä¼˜åŒ–æˆä¸€ä¸ª â€œä¼˜ç§€ â€çš„æœ€ç»ˆæ–¹æ¡ˆã€‚è¿™
ç§ä»åŠŸèƒ½æ­£ç¡®åˆ°æ€§èƒ½é«˜æ•ˆã€ä»é€»è¾‘ç²—ç³™åˆ°é€»è¾‘ä¸¥è°¨çš„æå‡ï¼Œåœ¨å¾ˆå¤šå…³é”®ä»»åŠ¡ä¸­æ˜¯è‡³å…³é‡è¦çš„ã€‚
2. é²æ£’æ€§ä¸å¯é æ€§å¢å¼º :é€šè¿‡å†…éƒ¨çš„è‡ªæˆ‘çº é”™å¾ªç¯ï¼Œæ™ºèƒ½ä½“èƒ½å¤Ÿå‘ç°å¹¶ä¿®å¤åˆå§‹æ–¹æ¡ˆä¸­å¯èƒ½å­˜åœ¨çš„é€»è¾‘æ¼æ´ã€äº‹å®
æ€§é”™è¯¯æˆ–è¾¹ç•Œæƒ…å†µå¤„ç†ä¸å½“ç­‰é—®é¢˜ï¼Œä»è€Œå¤§å¤§æé«˜äº†æœ€ç»ˆç»“æœçš„å¯é æ€§ã€‚
ç»¼ä¸Šæ‰€è¿°ï¼Œ Reflection æœºåˆ¶æ˜¯ä¸€ç§å…¸å‹çš„ â€œä»¥æˆæœ¬æ¢è´¨é‡ â€çš„ç­–ç•¥ã€‚å®ƒéå¸¸é€‚åˆé‚£äº› å¯¹æœ€ç»ˆç»“æœçš„è´¨é‡ã€å‡†ç¡®æ€§å’Œå¯é æ€§
æœ‰æé«˜è¦æ±‚ï¼Œä¸”å¯¹ä»»åŠ¡å®Œæˆçš„å®æ—¶æ€§è¦æ±‚ç›¸å¯¹å®½æ¾ çš„åœºæ™¯ã€‚ä¾‹å¦‚ :
ç”Ÿæˆå…³é”®çš„ä¸šåŠ¡ä»£ç æˆ–æŠ€æœ¯æŠ¥å‘Šã€‚
åœ¨ç§‘å­¦ç ”ç©¶ä¸­è¿›è¡Œå¤æ‚çš„é€»è¾‘æ¨æ¼”ã€‚
éœ€è¦æ·±åº¦åˆ†æå’Œè§„åˆ’çš„å†³ç­–æ”¯æŒç³»ç»Ÿã€‚
åä¹‹ï¼Œå¦‚æœåº”ç”¨åœºæ™¯éœ€è¦å¿«é€Ÿå“åº”ï¼Œæˆ–è€…ä¸€ä¸ª â€œå¤§è‡´æ­£ç¡® â€çš„ç­”æ¡ˆå°±å·²ç»è¶³å¤Ÿï¼Œé‚£ä¹ˆä½¿ç”¨æ›´è½»é‡çš„  ReAct æˆ– Plan-and-
Solve èŒƒå¼å¯èƒ½ä¼šæ˜¯æ›´å…·æ€§ä»·æ¯”çš„é€‰æ‹©ã€‚
4.5 æœ¬ç« å°ç»“  
åœ¨æœ¬ç« ä¸­ï¼Œä»¥ç¬¬ä¸‰ç« æŒæ¡çš„å¤§è¯­è¨€æ¨¡å‹çŸ¥è¯†ä¸ºåŸºç¡€ï¼Œæˆ‘ä»¬é€šè¿‡ â€œäº²æ‰‹é€ è½®å­ â€çš„æ–¹å¼ï¼Œä»é›¶å¼€å§‹ç¼–ç å®ç°äº†ä¸‰ç§ä¸šç•Œç»
å…¸çš„æ™ºèƒ½ä½“æ„å»ºèŒƒå¼ :ReActã€Plan-and-Solve ä¸ Reflection ã€‚æˆ‘ä»¬ä¸ä»…æ¢ç´¢äº†å®ƒä»¬çš„æ ¸å¿ƒå·¥ä½œåŸç†ï¼Œè¿˜é€šè¿‡å…·ä½“çš„å®
æˆ˜æ¡ˆä¾‹ï¼Œæ·±å…¥äº†è§£äº†å„è‡ªçš„ä¼˜åŠ¿ã€å±€é™ä¸é€‚ç”¨åœºæ™¯ã€‚
æ ¸å¿ƒçŸ¥è¯†ç‚¹å›é¡¾ :
1. ReAct:æˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªèƒ½ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’çš„  ReAct æ™ºèƒ½ä½“ã€‚é€šè¿‡ â€œæ€è€ƒ -è¡ŒåŠ¨ -è§‚å¯Ÿ â€çš„åŠ¨æ€å¾ªç¯ï¼Œå®ƒæˆåŠŸåœ°åˆ©ç”¨æœ
ç´¢å¼•æ“å›ç­”äº†è‡ªèº«çŸ¥è¯†åº“æ— æ³•è¦†ç›–çš„å®æ—¶æ€§é—®é¢˜ã€‚å…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äº ç¯å¢ƒé€‚åº”æ€§ å’ŒåŠ¨æ€çº é”™èƒ½åŠ› ï¼Œä½¿å…¶æˆä¸ºå¤„ç†
æ¢ç´¢æ€§ã€éœ€è¦å¤–éƒ¨å·¥å…·è¾“å…¥çš„ä»»åŠ¡çš„é¦–é€‰ã€‚
2. Plan-and-Solve: æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªå…ˆè§„åˆ’åæ‰§è¡Œçš„  Plan-and-Solve æ™ºèƒ½ä½“ï¼Œå¹¶åˆ©ç”¨å®ƒè§£å†³äº†éœ€è¦å¤šæ­¥æ¨ç†çš„æ•°
å­¦åº”ç”¨é¢˜ã€‚å®ƒå°†å¤æ‚çš„ä»»åŠ¡åˆ†è§£ä¸ºæ¸…æ™°çš„æ­¥éª¤ï¼Œç„¶åé€ä¸€æ‰§è¡Œã€‚å…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äº ç»“æ„æ€§å’Œç¨³å®šæ€§ï¼Œç‰¹åˆ«é€‚åˆå¤„
ç†é€»è¾‘è·¯å¾„ç¡®å®šã€å†…éƒ¨æ¨ç†å¯†é›†çš„ä»»åŠ¡ã€‚
3. Reflection ( è‡ªæˆ‘åæ€ä¸è¿­ä»£ ):æˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªå…·å¤‡è‡ªæˆ‘ä¼˜åŒ–èƒ½åŠ›çš„  Reflection æ™ºèƒ½ä½“ã€‚é€šè¿‡å¼•å…¥ â€œæ‰§è¡Œ -åæ€ -ä¼˜
åŒ–â€çš„è¿­ä»£å¾ªç¯ï¼Œå®ƒæˆåŠŸåœ°å°†ä¸€ä¸ªæ•ˆç‡è¾ƒä½çš„åˆå§‹ä»£ç æ–¹æ¡ˆï¼Œä¼˜åŒ–ä¸ºäº†ä¸€ä¸ªç®—æ³•ä¸Šæ›´ä¼˜çš„é«˜æ€§èƒ½ç‰ˆæœ¬ã€‚å…¶æ ¸å¿ƒä»·
å€¼åœ¨äºèƒ½ æ˜¾è‘—æå‡è§£å†³æ–¹æ¡ˆçš„è´¨é‡ ï¼Œé€‚ç”¨äºå¯¹ç»“æœçš„å‡†ç¡®æ€§å’Œå¯é æ€§æœ‰æé«˜è¦æ±‚çš„åœºæ™¯ã€‚
æœ¬ç« æ¢è®¨çš„ä¸‰ç§èŒƒå¼ï¼Œä»£è¡¨äº†æ™ºèƒ½ä½“è§£å†³é—®é¢˜çš„ä¸‰ç§ä¸åŒç­–ç•¥ï¼Œå¦‚è¡¨ 4.1æ‰€ç¤ºã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€‰æ‹©å“ªä¸€ç§ï¼Œå–å†³äºä»»
åŠ¡çš„æ ¸å¿ƒéœ€æ±‚ :
è¡¨ 4.1 ä¸åŒ  Agent Loop çš„é€‰æ‹©ç­–ç•¥
è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†æ„å»ºå•ä¸ªæ™ºèƒ½ä½“çš„æ ¸å¿ƒæŠ€æœ¯ã€‚ä¸ºäº†è¿‡æ¸¡çŸ¥è¯†ï¼Œä»¥åŠå¯¹å®é™…åº”ç”¨æ›´åŠ æ·±å…¥ã€‚ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†ä¼šæ¢ç´¢
ä¸åŒä½ä»£ç å¹³å°çš„ä½¿ç”¨æ–¹å¼ä»¥åŠè½»ä»£ç æ„å»º agentçš„æ–¹æ¡ˆã€‚

--- ç¬¬102é¡µ ---

ä¹ é¢˜  
æç¤º :éƒ¨åˆ†ä¹ é¢˜æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œé‡ç‚¹åœ¨äºåŸ¹å…»å­¦ä¹ è€…å¯¹æ™ºèƒ½ä½“èŒƒå¼è®¾è®¡çš„ç»¼åˆç†è§£å’Œå®è·µèƒ½åŠ›ã€‚
1. æœ¬ç« ä»‹ç»äº†ä¸‰ç§ç»å…¸çš„æ™ºèƒ½ä½“èŒƒå¼ :ReActã€Plan-and-Solve å’Œ Reflectionã€‚è¯·åˆ†æ :
è¿™ä¸‰ç§èŒƒå¼åœ¨ "æ€è€ƒ "ä¸"è¡ŒåŠ¨ "çš„ç»„ç»‡æ–¹å¼ä¸Šæœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Ÿ
å¦‚æœè¦è®¾è®¡ä¸€ä¸ª "æ™ºèƒ½å®¶å±…æ§åˆ¶åŠ©æ‰‹ "ï¼ˆéœ€è¦æ§åˆ¶ç¯å…‰ã€ç©ºè°ƒã€çª—å¸˜ç­‰å¤šä¸ªè®¾å¤‡ï¼Œå¹¶æ ¹æ®ç”¨æˆ·ä¹ æƒ¯è‡ªåŠ¨è°ƒ
èŠ‚ï¼‰ï¼Œä½ ä¼šé€‰æ‹©å“ªç§èŒƒå¼ä½œä¸ºåŸºç¡€æ¶æ„ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ
æ˜¯å¦å¯ä»¥å°†è¿™ä¸‰ç§èŒƒå¼è¿›è¡Œç»„åˆä½¿ç”¨ï¼Ÿè‹¥å¯ä»¥ï¼Œè¯·å°è¯•è®¾è®¡ä¸€ä¸ªæ··åˆèŒƒå¼çš„æ™ºèƒ½ä½“æ¶æ„ï¼Œå¹¶è¯´æ˜å…¶é€‚ç”¨
åœºæ™¯ã€‚
2. åœ¨4.2èŠ‚çš„  ReAct å®ç°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†æ­£åˆ™è¡¨è¾¾å¼æ¥è§£æå¤§è¯­è¨€æ¨¡å‹çš„è¾“å‡ºï¼ˆå¦‚  Thought å’Œ Actionï¼‰ã€‚è¯·
æ€è€ƒ :
å½“å‰çš„è§£ææ–¹æ³•å­˜åœ¨å“ªäº›æ½œåœ¨çš„è„†å¼±æ€§ï¼Ÿåœ¨ä»€ä¹ˆæƒ…å†µä¸‹å¯èƒ½ä¼šå¤±è´¥ï¼Ÿ
é™¤äº†æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿˜æœ‰å“ªäº›æ›´é²æ£’çš„è¾“å‡ºè§£ææ–¹æ¡ˆï¼Ÿ
å°è¯•ä¿®æ”¹æœ¬ç« çš„ä»£ç ï¼Œä½¿ç”¨ä¸€ç§æ›´å¯é çš„è¾“å‡ºæ ¼å¼ï¼Œå¹¶å¯¹æ¯”ä¸¤ç§æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹
3. å·¥å…·è°ƒç”¨æ˜¯ç°ä»£æ™ºèƒ½ä½“çš„æ ¸å¿ƒèƒ½åŠ›ä¹‹ä¸€ã€‚åŸºäº 4.2.2èŠ‚çš„  ToolExecutor è®¾è®¡ï¼Œè¯·å®Œæˆä»¥ä¸‹æ‰©å±•å®è·µ :
æç¤º :è¿™æ˜¯ä¸€é“åŠ¨æ‰‹å®è·µé¢˜ï¼Œå»ºè®®å®é™…ç¼–å†™ä»£ç 
ä¸º ReAct æ™ºèƒ½ä½“æ·»åŠ ä¸€ä¸ª "è®¡ç®—å™¨ "å·¥å…·ï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç†å¤æ‚çš„æ•°å­¦è®¡ç®—é—®é¢˜ï¼ˆå¦‚ "è®¡ç®—  (123 + 456) Ã— 
789/ 12 = ? çš„ç»“æœ "ï¼‰
è®¾è®¡å¹¶å®ç°ä¸€ä¸ª "å·¥å…·é€‰æ‹©å¤±è´¥ "çš„å¤„ç†æœºåˆ¶ :å½“æ™ºèƒ½ä½“å¤šæ¬¡è°ƒç”¨é”™è¯¯çš„å·¥å…·æˆ–æä¾›é”™è¯¯çš„å‚æ•°æ—¶ï¼Œç³»ç»Ÿåº”
è¯¥å¦‚ä½•å¼•å¯¼å®ƒçº æ­£ï¼Ÿ
æ€è€ƒ :å¦‚æœå¯è°ƒç”¨å·¥å…·çš„æ•°é‡å¢åŠ åˆ° ä¸ªç”šè‡³ ä¸ªï¼Œå½“å‰çš„å·¥å…·æè¿°æ–¹å¼æ˜¯å¦è¿˜èƒ½æœ‰æ•ˆå·¥ä½œï¼Ÿåœ¨å¯è°ƒç”¨
å·¥å…·æ•°é‡éšä¸šåŠ¡éœ€æ±‚æ˜¾è‘—å¢åŠ æ—¶ï¼Œä»å·¥ç¨‹è§’åº¦å¦‚ä½•ä¼˜åŒ–å·¥å…·çš„ç»„ç»‡å’Œæ£€ç´¢æœºåˆ¶ï¼Ÿ
4. Plan-and-Solve èŒƒå¼å°†ä»»åŠ¡åˆ†è§£ä¸º "è§„åˆ’ "å’Œ"æ‰§è¡Œ "ä¸¤ä¸ªé˜¶æ®µã€‚è¯·æ·±å…¥åˆ†æ :
åœ¨4.3èŠ‚çš„å®ç°ä¸­ï¼Œè§„åˆ’é˜¶æ®µç”Ÿæˆçš„è®¡åˆ’æ˜¯ "é™æ€ "çš„ï¼ˆä¸€æ¬¡æ€§ç”Ÿæˆï¼Œä¸å¯ä¿®æ”¹ï¼‰ã€‚å¦‚æœåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç°
æŸä¸ªæ­¥éª¤æ— æ³•å®Œæˆæˆ–ç»“æœä¸ç¬¦åˆé¢„æœŸï¼Œåº”è¯¥å¦‚ä½•è®¾è®¡ä¸€ä¸ª "åŠ¨æ€é‡è§„åˆ’ "æœºåˆ¶ï¼Ÿ
å¯¹æ¯”  Plan-and-Solve ä¸ ReAct:åœ¨å¤„ç† "é¢„è®¢ä¸€æ¬¡ä»åŒ—äº¬åˆ°ä¸Šæµ·çš„å•†åŠ¡æ—…è¡Œï¼ˆåŒ…æ‹¬æœºç¥¨ã€é…’åº—ã€ç§Ÿ
è½¦ï¼‰ "è¿™æ ·çš„ä»»åŠ¡æ—¶ï¼Œå“ªç§èŒƒå¼æ›´åˆé€‚ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ
å°è¯•è®¾è®¡ä¸€ä¸ª "åˆ†å±‚è§„åˆ’ "ç³»ç»Ÿ :å…ˆç”Ÿæˆé«˜å±‚æ¬¡çš„æŠ½è±¡è®¡åˆ’ï¼Œç„¶åé’ˆå¯¹æ¯ä¸ªé«˜å±‚æ­¥éª¤å†ç”Ÿæˆè¯¦ç»†çš„å­è®¡åˆ’ã€‚
è¿™ç§è®¾è®¡æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ
5. Reflection æœºåˆ¶é€šè¿‡ "æ‰§è¡Œ -åæ€ -ä¼˜åŒ– "å¾ªç¯æ¥æå‡è¾“å‡ºè´¨é‡ã€‚è¯·æ€è€ƒ :
åœ¨4.4èŠ‚çš„ä»£ç ç”Ÿæˆæ¡ˆä¾‹ä¸­ï¼Œä¸åŒé˜¶æ®µä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªæ¨¡å‹ã€‚å¦‚æœä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„æ¨¡å‹ï¼ˆä¾‹å¦‚ï¼Œç”¨ä¸€ä¸ªæ›´
å¼ºå¤§çš„æ¨¡å‹æ¥åšåæ€ï¼Œç”¨ä¸€ä¸ªæ›´å¿«çš„æ¨¡å‹æ¥åšæ‰§è¡Œï¼‰ï¼Œä¼šå¸¦æ¥ä»€ä¹ˆå½±å“ï¼Ÿ
Reflection æœºåˆ¶çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ "åé¦ˆä¸­åŒ…å« æ— éœ€æ”¹è¿› "æˆ–"è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•° "ã€‚è¿™ç§è®¾è®¡æ˜¯å¦åˆç†ï¼Ÿèƒ½
å¦è®¾è®¡ä¸€ä¸ªæ›´æ™ºèƒ½çš„ç»ˆæ­¢æ¡ä»¶ï¼Ÿ
å‡è®¾ä½ è¦æ­å»ºä¸€ä¸ª "å­¦æœ¯è®ºæ–‡å†™ä½œåŠ©æ‰‹ "ï¼Œå®ƒèƒ½å¤Ÿç”Ÿæˆåˆç¨¿å¹¶ä¸æ–­ä¼˜åŒ–è®ºæ–‡å†…å®¹ã€‚è¯·è®¾è®¡ä¸€ä¸ªå¤šç»´åº¦çš„
Reflection æœºåˆ¶ï¼Œä»æ®µè½é€»è¾‘æ€§ã€æ–¹æ³•åˆ›æ–°æ€§ã€è¯­è¨€è¡¨è¾¾ã€å¼•ç”¨è§„èŒƒç­‰å¤šä¸ªè§’åº¦è¿›è¡Œåæ€å’Œæ”¹è¿›ã€‚
6. æç¤ºè¯å·¥ç¨‹æ˜¯å½±å“æ™ºèƒ½ä½“æœ€ç»ˆæ•ˆæœçš„å…³é”®æŠ€æœ¯ã€‚æœ¬ç« å±•ç¤ºäº†å¤šä¸ªç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯æ¨¡æ¿ã€‚è¯·åˆ†æ :
å¯¹æ¯” 4.2.3èŠ‚çš„  ReAct æç¤ºè¯å’Œ 4.3.2èŠ‚çš„  Plan-and-Solve æç¤ºè¯ï¼Œå®ƒä»¬æ˜¾ç„¶å­˜åœ¨ç»“æ„è®¾è®¡ä¸Šçš„æ˜æ˜¾
ä¸åŒï¼Œè¿™äº›å·®å¼‚æ˜¯å¦‚ä½•æœåŠ¡äºå„è‡ªèŒƒå¼çš„æ ¸å¿ƒé€»è¾‘çš„ï¼Ÿ

--- ç¬¬103é¡µ ---

åœ¨4.4.3èŠ‚çš„  Reflection æç¤ºè¯ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† "ä½ æ˜¯ä¸€ä½æå…¶ä¸¥æ ¼çš„ä»£ç è¯„å®¡ä¸“å®¶ "è¿™æ ·çš„è§’è‰²è®¾å®šã€‚
å°è¯•ä¿®æ”¹è¿™ä¸ªè§’è‰²è®¾å®šï¼ˆå¦‚æ”¹ä¸º "ä½ æ˜¯ä¸€ä½æ³¨é‡ä»£ç å¯è¯»æ€§çš„å¼€æºé¡¹ç›®ç»´æŠ¤è€… "ï¼‰ï¼Œè§‚å¯Ÿè¾“å‡ºç»“æœçš„å˜
åŒ–ï¼Œå¹¶æ€»ç»“è§’è‰²è®¾å®šå¯¹æ™ºèƒ½ä½“è¡Œä¸ºçš„å½±å“ã€‚
åœ¨æç¤ºè¯ä¸­åŠ å…¥  few-shot ç¤ºä¾‹å¾€å¾€èƒ½æ˜¾è‘—æå‡æ¨¡å‹å¯¹ç‰¹å®šæ ¼å¼çš„éµå¾ªèƒ½åŠ›ã€‚è¯·ä¸ºæœ¬ç« çš„æŸä¸ªæ™ºèƒ½ä½“å°
è¯•æ·»åŠ   few-shot ç¤ºä¾‹ï¼Œå¹¶å¯¹æ¯”å…¶æ•ˆæœã€‚
7. æŸç”µå•†åˆåˆ›å…¬å¸ç°åœ¨å¸Œæœ›ä½¿ç”¨ "å®¢æœæ™ºèƒ½ä½“ "æ¥ä»£æ›¿çœŸäººå®¢æœå®ç°é™æœ¬å¢æ•ˆï¼Œå®ƒéœ€è¦å…·å¤‡ä»¥ä¸‹åŠŸèƒ½ :
a. ç†è§£ç”¨æˆ·çš„é€€æ¬¾ç”³è¯·ç†ç”±
b. æŸ¥è¯¢ç”¨æˆ·çš„è®¢å•ä¿¡æ¯å’Œç‰©æµçŠ¶æ€
c. æ ¹æ®å…¬å¸æ”¿ç­–æ™ºèƒ½åœ°åˆ¤æ–­æ˜¯å¦åº”è¯¥æ‰¹å‡†é€€æ¬¾
d. ç”Ÿæˆä¸€å°å¾—ä½“çš„å›å¤é‚®ä»¶å¹¶å‘é€è‡³ç”¨æˆ·é‚®ç®±
e. å¦‚æœåˆ¤æ–­å†³ç­–å­˜åœ¨ä¸€å®šäº‰è®®ï¼ˆè‡ªæˆ‘ç½®ä¿¡åº¦ä½äºé˜ˆå€¼ï¼‰ï¼Œèƒ½å¤Ÿè¿›è¡Œè‡ªæˆ‘åæ€å¹¶ç»™å‡ºæ›´å®¡æ…çš„å»ºè®®
æ­¤æ—¶ä½œä¸ºè¯¥äº§å“çš„è´Ÿè´£äºº :
ä½ ä¼šé€‰æ‹©æœ¬ç« çš„å“ªç§èŒƒå¼ï¼ˆæˆ–å“ªäº›èŒƒå¼çš„ç»„åˆï¼‰ä½œä¸ºç³»ç»Ÿçš„æ ¸å¿ƒæ¶æ„ï¼Ÿ
è¿™ä¸ªç³»ç»Ÿéœ€è¦å“ªäº›å·¥å…·ï¼Ÿè¯·åˆ—å‡ºè‡³å°‘ 3ä¸ªå·¥å…·åŠå…¶åŠŸèƒ½æè¿°ã€‚
å¦‚ä½•è®¾è®¡æç¤ºè¯æ¥ç¡®ä¿æ™ºèƒ½ä½“çš„å†³ç­–æ—¢ç¬¦åˆå…¬å¸åˆ©ç›Šï¼Œåˆèƒ½ä¿æŒå¯¹ç”¨æˆ·çš„å‹å¥½æ€åº¦ï¼Ÿ
è¿™ä¸ªäº§å“ä¸Šçº¿åå¯èƒ½é¢ä¸´å“ªäº›é£é™©å’ŒæŒ‘æˆ˜ï¼Ÿå¦‚ä½•é€šè¿‡æŠ€æœ¯æ‰‹æ®µæ¥é™ä½è¿™äº›é£é™©ï¼Ÿ
å‚è€ƒæ–‡çŒ®  
[1] Yao S, Zhao J, Yu D, et al. React: Synergizing reasoning and acting in language models[C]//International  
Conference on Learning Representations (ICLR). 2023.
[2] Wang L, Xu W, Lan Y, et al. Plan-and-solve prompting: Improving zero-shot chain-of-thought reasoning by  
large language models[J]. arXiv preprint arXiv:2305.04091, 2023.
[3] Shinn N, Cassano F, Gopinath A, et al. Reflexion: Language agents with verbal reinforcement learning[J].  
Advances in Neural Information Processing Systems, 2023, 36: 8634-8652.
